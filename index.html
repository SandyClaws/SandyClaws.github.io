<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rejected</title>
</head>
<body>
  Разработка корпоративного телефонного справочника
 
СОДЕРЖАНИЕ

ВВЕДЕНИЕ	3
1 АНАЛИЗ ПРОЦЕССОВ ПРЕДМЕТНОЙ ОБЛАСТИ	4
1.1 Особенности организации корпоративного справочника	4
1.2 Моделирование процесса работы со справочником	5
1.3 Обзор готовых решений	9
1.4 Определение требований к корпоративному телефонному справочнику	13
2 ПРОЕКТНАЯ ЧАСТЬ	15
2.1 Выбор инструментов разработки	15
2.2 Проектирование структуры данных	17
2.3 Проектирование интерфейса справочника	20
2.3 Разработка веб-приложения	25
2.3.1 Разработка базы данных	25
2.3.2 Разработка проекта	26
2.4 Руководство пользователя	30
2.5 Руководство администратора	45
3 ОБОСНОВАНИЕ ЭКОНОМИЧЕСКОЙ ЭФФЕКТИВНОСТИ ОТ РАЗРАБОТКИ КОРПОРАТИВНОГО ТЕЛЕФОННОГО СПРАВОЧНИКА	46
ЗАКЛЮЧЕНИЕ	49
СПИСОК ИСПОЛЬЗОВАННЫХ ИСТОЧНИКОВ	50
ПРИЛОЖЕНИЕ А	52


 
ВВЕДЕНИЕ
Корпоративный телефонный справочник является актуальным и важным инструментом для любого бизнеса. Он позволяет сотрудникам быстро и легко находить нужную информацию и контакты, а также упрощает коммуникацию внутри компании.
Справочник содержит всю необходимую информацию о сотрудниках, включая их имена, должности, контактные данные, адреса электронной почты и номера телефонов. Это позволяет быстро связаться с нужным человеком и решить все вопросы в кратчайшие сроки.
Корпоративный телефонный справочник необходим в компании со сложной организационной структурой, в компании. Сотрудники которой часто ездят в командировки, а также в компании, имеющей множество филиалов в разных городах.
Объектом исследования является процесс коммуникации между сотрудниками организации. Предметом – повышение эффективности процесса коммуникации. 
Цель работы: разработка корпоративного телефонного справочника для повышения эффективности взаимодействия между сотрудниками.
Для достижения указанной цели необходимо решить следующие задачи:
	Изучение особенностей процесса коммуникации в компании.
	Проведение обзора готовых решений.
	Формулирование требований к корпоративному телефонному справочнику.
	Выбор инструментов для разработки приложения.
	Разработка корпоративного телефонного справочника.
	Расчет экономической эффективности для корпоративного телефонного справочника.
Работа состоит из введения, трех глав, заключение, списка использованных источников, приложения.
 
1 АНАЛИЗ ПРОЦЕССОВ ПРЕДМЕТНОЙ ОБЛАСТИ
1.1 Особенности организации корпоративного справочника
Корпоративный телефонный справочник – это сборник контактных данных сотрудников компании, которые могут быть использованы для связи с ними. Справочник содержит информацию о фамилии, имени, отчестве, должности, контактных данных (телефонах и электронной почте) каждого сотрудника [1].
В справочнике должны быть указаны только актуальные контактные данные сотрудников, а не устаревшие. Для этого данные в справочнике необходимо регулярно обновлять. Необходимо наличие удобной системы поиска по фамилиям, должностям сотрудников, видам контактов, филиалам организации.
Контакты сотрудников должны быть защищены паролем или другим способом, чтобы предотвратить несанкционированный доступ к ним. Справочник должен быть легко адаптируемым к изменениям в структуре компании, персональном составе сотрудников, видов контактов. Справочник должен быть доступен для всех сотрудников компании, но защищен от доступа неавторизованных пользователей.
Для повышения эффективности работы со справочником необходимо наличие интеграции с другими системами компании, выгрузка данных в обще используемые форматы. При создании справочника целесообразно применять современные технологии автоматизации, что позволит упростить процесс ведения корпоративного телефонного справочника.
Корпоративный справочник должен обеспечивать возможность хранения нескольких видов контактных данных, а также нескольких контактов одного вида для каждого сотрудника. Это позволит выбирать наиболее эффективный способ связи для различных ситуаций, а также повысить эффективность коммуникативного процесса [1].
Корпоративный справочник должен быть доступен на любых устройствах: персональный компьютер, телефон, планшет. Это позволит обеспечить эффективную коммуникацию между сотрудниками независимо от места их нахождения.
1.2 Моделирование процесса работы со справочником
Для определения функций, которые необходимо реализовать при разработке телефонного корпоративного справочника целесообразным является моделирование процесса по использованию указанного справочника в компании.
Современными бизнес-аналитиками используется множество методологий для построения моделей бизнес-процессов различного типа и масштаба. Однако обзор литературы показывает, что наиболее эффективными считаются следующие [2-4]:
	Business Process Model and Notation (BPMN);
	Event-Driven Process Chain (EPC);
	Integrated Computer Aided Manufacturing Definition (IDEF0).
Методология IDEF0 предназначена для построения иерархических моделей процессов с различной степенью детализации операций. Верхний уровень иерархии моделей отображает процесс как единое целое в окружении входных и выходных данных, управления и механизмов. Управление представляет собой документы и нормативные акты, регулирующие ход выполнения процесса. Механизмы – сотрудников, выполняющих задачи процесса, а также инструменты, используемые сотрудниками.
Низкоуровневая детализация затрудняется тем, что IDEF0 не содержит элементов для ветвления потоков. Часто для диаграмм на низших слоях иерархической структуры используются родственные нотации, позволяющие отобразить нелинейное движение процесса. 
BPMN позволяет отобразить задачи и подпроцессы моделируемого процесса, условия, альтернативные потоки, события различного типа, документы. Для событий и шлюзов ветвления имеется большое количество обозначений, позволяющих продемонстрировать альтернативные, параллельные асинхронные действия. Методология позволяет отобразить весь процесс на одной диаграмме. Детализация для отдельных подпроцессов строится по мере необходимости.
Достоинством нотации является подробное описание бизнес-процесса, возможность отображения альтернативных путей при решении задач. К недостаткам следует отнести сложность восприятия диаграмм при большом количестве элементов.
EPC основана на событиях. Нотация предназначена для построения схемы выполнения бизнес-процессов любого типа. Каждому действию предшествует событие. После того как действие завершилось, снова наступает событие. Достоинства нотации: подробное описание процесса, большое количество элементов для обозначения участников действий, аппаратных и программных систем. 
Основным недостатком является наличие тривиальных событий, отсутствие которых нарушает правила построения модели. Примерами тривиальных событий являются: «Файл сохранен», «Договор создан» и т.д.
Для моделирования указанного процесса выбрана нотация BPMN. Нотация BPMN (Business Process Model and Notation) представляет собой язык моделирования бизнес-процессов, который позволяет описывать и анализировать процессы в организации.
BPMN позволяет описывать процессы в виде диаграмм, которые состоят из задач, событий, потоков данных и т.д. Каждый элемент на диаграмме имеет определенный тип и может быть связан с другими элементами. Нотация BPMN является универсальной. Она может использоваться для описания процессов различного типа.
При моделировании процесса с помощью BPMN можно отображать на диаграмме различных участников процесса и указывать их действия в отдельном потоке. Благодаря этому, диаграмма позволяет оценить загруженность участников процесса и распределять функции между различными ролями наиболее оптимальным способом.
Модель процесса по работе с корпоративным телефонным справочником показана на рисунке 1.

 
 
Рисунок 1 – Модель процесса по работе с телефонным справочником

 
В целях безопасности, необходимо ограничить доступ к редактированию и удалению данных. Полный доступ должен быть только у администратора. 
Менеджер (руководитель подразделения) должен иметь доступ к изменению и добавлению записей по контактам сотрудников своего подразделения. При этом, менеджер не может удалять записи. Таким образом, менеджер может актуализировать данные, добавить новые данные.
Обычный сотрудник должен иметь права только на просмотр и поиск данных. Таким образом, сотрудник может получить контакты любого другого сотрудника, но не может их изменить.
Всем ролям доступен просмотр и поиск записей. Основной целью поиска записей с контактами является решение профессиональных задач за счет эффективной коммуникации между отделами и филиалами организации. 
Корпоративный телефонный справочник позволит наладить процессы коммуникации в следующих случаях:
	компания имеет несколько филиалов;
	сотрудники часто ездят в командировки;
	в компании работает большое количество сотрудников;
	сотрудникам необходимо постоянно взаимодействовать между собой.
Далее необходимо детализировать подпроцессы. На рисунке 2 показана схема работы подпроцесса «Выгрузка записей».
 
Рисунок 2 – Детализация подпроцесса «Выгрузка записей»
При выгрузке записей пользователю необходимо найти необходимые записи, выбрать тип файла, в который записи будут выгружены и сохранить файл. Детализация подпроцесса «Заполнение справочника» показана на рисунке 3.
 
Рисунок 3 – Детализация подпроцесса «Заполнение справочника»
При заполнении справочника необходимо внести категорию (тип контакта), данные о филиале, должности, подразделения, данные сотрудника и добавить сотруднику контакт. Детализация подпроцесса «Проверка актуальности данных» показана на рисунке 4.
 
Рисунок 4 – Детализация подпроцесса «Проверка актуальности данных»
На рисунке 5 показана детализация подпроцесса «Поиск записей».
 
Рисунок 5 – Детализация подпроцесса «Поиск записей»
При поиске записей пользователю необходимо указать значения для критериев поиска и запустить поиск. Если записи найдены, то процесс поиска завершен, в противном случае, необходимо изменить список критериев, либо их значения.
1.3 Обзор готовых решений
После моделирования процесса целесообразным является изучение готовых решений, представленных на рынке. Обзор готовых решений позволит изучить их достоинства и недостатки, а также определить, насколько полно рассмотренные решения выполняют поставленные задачи [5].
Mango Office – это программа для управления контактами, которая позволяет создавать адресные книги, проводить бизнес-коммуникации. Она имеет множество функций, включая создание контактных карточек, организацию адресной книги, поиск контактов, отправку сообщений и т.д. Mango Office также имеет интеграцию с другими приложениями, такими как Gmail, Outlook и т.д., что позволяет легко переносить контакты между различными программами. Интерфейс программы показана на рисунке 6.
 
Рисунок 6 – Интерфейс Mango Office
Основные функции Mango Office:
	Приложение позволяет сотрудникам работать над проектами вместе, обмениваться файлами и комментировать их.
	Чат: имеется возможность общаться с коллегами в режиме реального времени.
	Mango Office позволяет создавать задачи и назначать их сотрудникам.
	Имеет встроенный календарь, который позволяет сотрудникам планировать свои задачи и встречи.
	Поддерживает работу с документами различных форматов, таких как Word, Excel и PowerPoint.
	Уведомляет сотрудников о новых задачах, комментариях и изменениях в документах.
К недостаткам рассмотренного решения следует отнести его высокую стоимость и наличие большого количества функций, избыточных для телефонного справочника.
«Телфин» – это российская компания, которая предоставляет услуги виртуальной АТС и колл-трекинга. На сегодняшний день является одним из лидеров рынка в своей отрасли [6].
«Телфин» предлагает своим клиентам широкий спектр услуг, включая CRM-систему, запись звонков и т.д. Компания также предоставляет инструменты для анализа звонков и оценки эффективности маркетинга.
Интерфейс системы показан на рисунке 7.
 
Рисунок 7 – Интерфейс программы «Телфин»
«Телфин» имеет удобный интерфейс и простой процесс настройки, что делает его доступным для широкого круга пользователей. Компания также предлагает круглосуточную поддержку клиентов и регулярные обновления своих продуктов. Недостатками указанной системы являются высокая стоимость услуг, отсутствие гибкости в настройке виртуальной АТС, наличие избыточных для телефонного справочника функций.
Ростелеком АТС – это платформа для создания и управления контакт-центрами [7]. Она позволяет автоматизировать процессы обработки звонков, управления клиентскими данными, а также обеспечивает интеграцию с другими системами.
Интерфейс системы представлен на рисунке 8.
 
Рисунок 8 – Интерфейс «Ростелеком АТС»
Ростелеком АТС имеет широкий функционал, включая:
	Автоматизацию процессов обработки звонков: запись разговоров, маршрутизация звонков, распределение звонков между операторами, автоматический ответ на звонки и т.д.
	Управление клиентскими данными: хранение и управление информацией о клиентах, создание профилей клиентов, управление контактами и т.д.
	Интеграцию с другими системами: возможность интеграции с CRM-системами, ERP-системами, системами управления проектами и т.д., что позволяет оптимизировать работу контакт-центра.
	Аналитику: сбор и анализ данных о работе контакт-центра, определение эффективности работы операторов, анализ звонков и т.д.
	Масштабируемость: возможность расширения функциональности и увеличения количества операторов в зависимости от потребностей бизнеса.
	Безопасность: защита информации о клиентах и операциях контакт-центра от несанкционированного доступа.
7. Удобство использования: интуитивно понятный интерфейс и возможность настройки под индивидуальные потребности бизнеса.
Недостатками Ростелеком АТС являются высокая стоимость услуг, наличие избыточных функций.
1.4 Определение требований к корпоративному телефонному справочнику
Корпоративный телефонный справочник должна представлять собой веб-приложение, имеющее структуру «Клиент-сервер». Система должна быть централизованной: все данные должны храниться в одном месте (сервер базы данных), доступ к данным должен осуществляться с помощью браузера.
Приложение должно состоять из следующих подсистем:
	Подсистема хранения данных предназначена для сбора, накопления и хранения данных;
	Подсистема обработки данных – обеспечивает авторизацию в системе с открытием соответствующего учетной записи личного кабинета, поиск данных по ключевым словам, добавление, удаление, обновление данных, хранимых в системе;
	Подсистема представления данных обеспечивает отображение хранимых, либо обработанных данных в удобном для восприятия виде.
Указанные подсистемы должны вести обмен информацией с помощью открытых форматов обмена данными. Для обмена информацией должны использоваться внутренние модули для информационного взаимодействия.
Корпоративный телефонный справочник должен выполнять следующие функции:
	добавление, изменение, удаление записей о сотрудниках, их контактах, подразделениях, должностях, званиях;
	поиск записей по фамилии, должности, отделу, званию;
	авторизация и регистрация в справочнике;
	отображение записей о контактах сотрудников;
	возможность использования контактов прямо из справочника (звонок при клике по номеру телефона, запуск почтового клиента при нажатии на почту).
Корпоративный телефонный справочник должен представлять собой веб-приложение и корректно отображаться в разных браузерах и на различных устройствах.
Доступ к данным должен быть разграничен. Необходимо использовать следующие группы пользователей:
	Администратор: имеет доступ к просмотру, поиску и редактированию всех данных;
	Менеджер: является руководителем подразделения, имеет доступ к редактированию контактов своих сотрудников, просмотру и поиску данных сотрудников из других подразделений;
	Сотрудник: может просматривать контакты сотрудников всех подразделений, выполнять поиск по нескольким критериям, не имеет доступа к редактированию данных.
Корпоративный телефонный справочник должен иметь модульную структуру, которая может быть легко модернизирована при необходимости добавления новых функций, либо исключения неактуальных функций. Для построения структуры приложения справочника необходимо использовать структурный шаблон проектирования MVC. Это позволит разделить данные, их представление и логику их обработки по независимым модулям.

 
2 ПРОЕКТНАЯ ЧАСТЬ
2.1 Выбор инструментов разработки
Одним из наиболее целесообразных способов разработки сайта является разработка с использованием фреимворка – специализированного набора инструментов, позволяющего ускорить процесс написания кода. При выборе фреимворка одним из наиболее оптимальных вариантов является Django (python). К его основным достоинствам относятся [8-10]:
	развитая экосистема: фреимворк содержит большое количество дополнительных приложений, позволяющих расширять функциональные возможности сайта;
	большое количество обучающих материалов: фреимворк существует более десяти лет, за это время создана обширная документация, появилось множество неофициальных форумов с разбором кейсов;
	панель администратора: создается при установке фреимворка автоматически, имеет большое количество возможностей по работе с объектами (добавление, редактирование, удаление, поиск, фильтрация), панель администратора можно настраивать из кода проекта;
	SEO-дружественность: создаваемый код для веб-сайта генерируется с учетом особенностей SEO-продвижения, разработчик может добавлять любые функции, направленные на оптимизацию поиска;
	фреимворк поддерживает работу с большим количеством плагинов, позволяющих добавлять новые функциональные возможности для сайта;
	поддержка большого количества внешних библиотек;
	наличие ORM: механизм ORM используется для взаимодействия с реляционными базами данных через объектно-ориентированную парадигму, разработчик создает классы и методы, на их основе генерируются реляционные объекты.
Python – это высокоуровневый язык программирования общего назначения, который используется для решения широкого спектра задач. Python полностью поддерживает объектно-ориентированную концепцию программирования, что позволяет создавать объекты и классы, которые могут быть использованы повторно. Это упрощает написание кода и делает его более читаемым [11-14].
Python имеет множество библиотек и модулей, которые можно использовать для различных задач, таких как работа с данными, обработка текста, работа с сетью и т.д. Кроме того, Python имеет простой и понятный синтаксис. 
SQLite – файловая реляционная СУБД, основными характеристиками которой являются простота и скорость в работе с данными. СУБД поддерживает работу SQL-команд. Взаимодействие с базой происходит через командный интерфейс. Однако, имеется визуальный клиент DB Brouser, предназначенный как для разработчиков, так и обычных пользователей. SQLite может быть использована как промежуточное хранилище данных, заполняемое из серверной базы данных [15].
Одним из немногих недостатков SQLite является отсутствие пользовательского управления и возможности разграничения доступа к данным. Для решения указанной проблемы необходимо разработать программный интерфейс и разграничивать доступ через него.
SQLite предоставляет простой и понятный интерфейс для работы с данными. Поддерживает различные типы данных, такие как строки, числа, даты и т.д. Позволяет создавать индексы для ускорения поиска и сортировки данных. SQLite поддерживает несколько языков программирования, включая C, C++, Java и Python.
Структура сайта построена на основе паттерна MVC с использованием объектно-ориентированного подхода к разработке. Объектно-ориентированный – наиболее приближен к реальности [16-18]. При анализе предметной области выделяются ее основные сущности. На основе выделенных сущностей создаются классы, представляющие собой структуру реальной сущности и ее поведение.




2.2 Проектирование структуры данных
Первым этапом проектирования базы данных является анализ предметной области, цель которого заключается в определении основных сущностей, необходимых для решения поставленных задач [19-22].
В результате анализа предметной области выделены следующие сущности:
	Должность: должность сотрудника;
	Сотрудник: сотрудник компании;
	Контакт: контакт сотрудника (почта, рабочий, личный телефон и т.д.);
	Категория: вид контакта (почта, телефон);
	Подразделение: структурная единица организации.
После определения сущностей необходимо построить концептуальную схему структуры данных. Для построения схемы можно использовать одну из современных нотаций, в частности, нотацию П. Чена. Концептуальная схема структуры данных показана на рисунке 9.

 
 
Рисунок 9 – Концептуальная схема предметной области

 
На основе концептуальной схемы предметной области строится логическая модель базы данных (рисунок 10).
 
Рисунок 10 – Логическая модель базы данных
Разработанные таблицы находятся в первой нормальной форме (1НФ), так как значения всех ячеек являются атомарными. Таблицы соответствуют второй нормальной форме (2НФ), так как они находятся в 1НФ и все неключевые атрибуты для каждой таблицы неприводимо зависят от ключевого атрибута. Таблицы находятся в третьей нормальной форме (3НФ), так как они находятся в 2НФ и отсутствуют транзитивные зависимости между неключевыми атрибутами.
2.3 Проектирование интерфейса справочника
Для отображения структуры корпоративного телефонного справочника использована диаграмма компонентов UML [11]. Диаграмма компонентов UML показывает структуру и взаимосвязи компонентов системы. На диаграмме компоненты отображаются в виде прямоугольников, а связи между ними – в виде линий. Компонент может иметь интерфейсы, которые представляют собой набор операций и свойств, доступных для использования другими компонентами.
Диаграмма компонентов для корпоративного телефонного справочника показана на рисунке 11.
 
Рисунок 11 – Структура интерфейса телефонного справочника
Как видно из рисунка, интерфейс системы содержит следующие модули:
	Members: модуль, отвечающий за авторизацию;
	PhoneBook: основной модуль, реализующий навигацию по URL;
	Manage.py: один из системных модулей Django;
	Employees: модуль, отвечающий за реализацию поиска записей о контактах и их отображение.
Для отображения ролей пользователей справочника и доступных им функций использована диаграмма вариантов использования. Диаграмма вариантов использования (Use Case Diagram) – это графическое представление вариантов использования системы, которые описывают ее функциональные возможности. Она используется для определения требований к системе.
Диаграмма вариантов использования состоит из: акторов, представляющих собой пользователей, вариантов использования, которые являются функциями системы, а также связей между ними.
Диаграмма вариантов использования, демонстрирующая функции, доступные сотруднику, показана на рисунке 12.
 
Рисунок 12 – Диаграмма вариантов использования для сотрудника
Сотрудник имеет доступ к просмотру, поиску записей. Для доступа к данным необходимо авторизоваться. Функции менеджера показаны на рисунке 13.
 
Рисунок 13 – Диаграмма вариантов использования для менеджера
Менеджеру также доступны просмотр и поиск записей о контактах всей организации, а также имеется доступ к редактированию данных сотрудников своего подразделения. 
Диаграмма вариантов использования для администратора показана на рисунке 14.
 
Рисунок 14 – Диаграмма вариантов использования для администратора
Администратор имеет доступ к просмотру, поиску и редактированию всех данных в справочнике.



2.3 Разработка веб-приложения
2.3.1 Разработка базы данных
Построение физической модели базы данных выполняется на основе логической модели. Для разработки базы данных использованы СУБД SQLite и клиент к СУБД DB Browser for SQLite. 
База данных содержит следующие таблицы:
	пользовательские: созданы на основе анализа предметной области, необходимы для решения поставленных задач;
	системные: генерируются с помощью скриптов Django, используются для корректной работы фреимворка и реализации механизма аутентификации.
Системные таблицы:
	Auth_group – группы пользователей;
	Auth_permission – права пользователей;
	Auth_group_permissions – права для групп пользователей;
	Auth_user – учетные записи пользователей;
	Auth_user_groups – списки групп пользователей;
	Auth_user_user_permissions – права отдельных учетных записей;
	Django_admin_log – журнал логгирования действий;
	Django_content_type –типы контента, классы, с помощью которых создаются таблицы базе данных;
	Django_migrations –миграции, выполняемые для создания или редактирования базы данных;
	Django__session –ключ для обеспечения безопасности сессии и время его устаревания.
Пользовательские таблицы:
	employees_category: категория контакта;
	employees_contact: контакт сотрудника;
	employees_department: структурная единица организации;
	employees_departmenttype: тип структурной единицы;
	employees_employee: сотрудник;
	employees_place: должность сотрудника.
Разработка базы данных выполняется с помощью миграций [13-14]. Для создания базы данных необходимо сначала создать пустую базу данных, затем указать параметры для связи с ней в конфигурационном файле проекта. После этого в проекте создаются классы, представляющие собой таблицы базы данных. Таблицы создаются на основе классов с помощью миграций. Процесс создания и выполнения миграций показан на рисунке 15.
 
Рисунок 15 – Выполнение миграций
Команда python manage.py makemigrations создает миграцию в случае изменения файла с классами. Команда python manage.py migrate вносит изменения в базу данных. 
2.3.2 Разработка проекта
Для разработки проекта с использованием Python и Django необходимо использовать терминал для запуска команд Django [15-17]. На первом шаге в терминале создается каталог для проекта. В каталоге создается и активируется виртуальная среда для работы фреимворка Django (рисунок 16):

 
Рисунок 16 – Создание каталога, активация виртуальной среды
Далее необходимо выполнить установку самого фреимворка в каталог (рисунок 17).
 
Рисунок 17 – Установка фреимворка Django
Далее необходимо создать главный функциональный каталог проекта, в котором будут храниться все настройки. Для его создания используется команда django-admin startproject (рисунок 18).
 
Рисунок 18 – Создание главного функционального каталога
Все функции разрабатываемого сайта находятся в отдельных модулях. Количество модулей определяется решаемой задачей. При разработке корпоративного телефонного справочника созданы следующие модули:
	Employees: интерфейс сотрудника и менеджера (рисунок 19);
	Members: авторизация;
	Phone_Book: настройки, доступ к панели администрирования.
 
Рисунок 19 – Создание модуля Employees
Все модули, создаваемые командой python manage.py startapp, должны быть указаны в конфигурационном файле settings.py модуля Phone_Book (рисунок 20). Модули, неуказанные в данном файле, будут работать некорректно.
 
Рисунок 20 – Список модулей в конфигурационном файле
Для того, чтобы реализовать функцию, необходимо выполнить следующие действия:
	создать url;
	создать шаблон.
	написать код функции, открывающейся по url и запускающей шаблон.
На рисунке 21 показаны url-адреса для функций модуля Members.
 
Рисунок 21 – Массив с url для функций модуля Members
Шаблон страницы содержит как html-разметку, css-классы [18-20], так и команды Django (рисунок 22), позволяющие заполнять шаблон данными, подключать один шаблон к другому и т.д.
 
Рисунок 22 – Шаблон для страницы с профилем
Шаблон для страницы с профилем содержит ссылку на базовый шаблон страницы (extends), команды для начала и окончания контентного блока страницы (block content, endblock), разметку для содержимого страницы.
Фрагмент файла с кодами функций, вызываемых url-командами, показан на рисунке 23.

 
Рисунок 23 – Функции
В верхней части файла расположены библиотеки, используемые в разработанных функциях.

2.4 Руководство пользователя
При запуске приложения открывается стартовая страница с приглашением к авторизации (рисунок 24). На странице расположен заголовок приложения, баннер и сообщение с приглашением к авторизации в приложении.
 
Рисунок 24 – Стартовая страница приложения
Пункт меню «Вход» ведет на форму авторизации (рисунок 25).
 
Рисунок 25 – Форма авторизации
В приложении используются три роли пользователей:
	Администратор;
	Менеджер;
	Сотрудник.
При авторизации под учетной записью менеджера, пользователь перемещается на страницу со своим профилем (рисунок 26).
 
Рисунок 26 – Профиль менеджера
Менеджер является руководителем учреждения. Организация имеет сложную организационную структуру, состоящую из структурных подразделений разного уровня, часть из которых является составными частями других. Например, учреждение включает в себя отделы, отделы могут включать в себя более мелкие структуры и т.д. В профиле менеджера отображается название структурной единицы, которую менеджер возглавляет (учреждение).
В задачи менеджера входит ведение и актуализация справочника с контактами его подчиненных. Пункт меню «Редактирование контактов» позволяет открыть список подразделений учреждения, которое возглавляет авторизованный менеджер (рисунок 27).
 
Рисунок 27 – Список подразделений учреждения
Кнопка «Далее» открывает список структурных подразделений выбранной отдела, либо список сотрудников, если подчиненные подразделения отсутствуют. Пример списка сотрудников показан на рисунке 28.
 
Рисунок 28 – Сотрудники структурной единицы
Кнопка «Контакты» открывает список контактов выбранного сотрудника (рисунок 29).
 
Рисунок 29 – Контакты выбранного сотрудника
Кнопка «Добавить» открывает форму добавления нового контакта (рисунок 30).
 
Рисунок 30 – Новый контакт для сотрудника
При создании нового контакта необходимо выбрать его тип и указать значение для контакта. После этого запись будет добавлена в базу, а контакт отображен в справочнике. 
Добавлять, редактировать или удалять контакты менеджер может только для подчиненных сотрудников. Все остальные записи доступны ему только для просмотра.
Пункт меню «Поиск контактов» открывает список учреждений для дальнейшего выбора структурных единиц (рисунок 31).
 
Рисунок 31 – Поиск контактов
Пользователю необходимо выбрать учреждение и нажать кнопку «Найти». После этого будет отображен список подчиненных подразделений для выбранного учреждения (рисунок 32).
Кнопка «Далее» ведет на список сотрудников, либо на список подчиненных структурных единиц.
 
Рисунок 32 – Список подразделений
На странице со списком сотрудников имеется форма поиска по фамилии и званию. Может быть указано одно из значений, либо оба. Результат поиска будет отображен в таблице под формой (рисунок 33).
 
Рисунок 33 – Список сотрудников выбранного подразделения
Кнопка «Контакты» открывает список контактов сотрудника (рисунок 34).
 
Рисунок 34 – Список контактов сотрудника
При клике на контакт открывается приложение для совершения звонка, либо почтовый клиент (рисунок 35).
 
Рисунок 35 – Запуск приложения для звонка
Если пользователь относится к роли «Сотрудник» (к данной роли относятся все, кроме руководителя учреждения), то в его личном кабинете доступны просмотр профиля и поиск контактов других сотрудников. При авторизации сотрудник автоматически перемещается на профиль (рисунок 36).

 
Рисунок 36 – Профиль сотрудника
Пункт меню «Поиск контактов» (рисунок 37) ведет на форму выбора подразделения для дальнейшего поиска.

 
Рисунок 37 – Список учреждений
Поиск контактов, как и у менеджера, начинается с выбора учреждения. Далее пользователю будет отображен список подчиненных отделов (рисунок 38).
 
Рисунок 38 – Подчиненные структурные единицы выбранного учреждения
Если выбранная структурная единица не имеет подчиненных подразделений, то будет отображен список ее сотрудников с формой поиска по фамилии и званию (рисунок 39).
Поиск выполняется по обоим параметрам, либо по одному из них. Если пользователь не укажет ни одного параметра, то будут отображены все записи, а также сообщение об ошибке (рисунок 40).

 
Рисунок 39 – Сотрудники отдела

 
Рисунок 40 – Ошибка при выполнении поиска
Кнопка «Контакты» позволяет открыть список контактов сотрудника (рисунок 41). При клике на контакт открывается приложение для отправки сообщения по почте, либо для совершения звонка по телефону.

 
Рисунок 41 – Список контактов выбранного сотрудника
Доступ в панель администрирования осуществляется по команде /admin, которую необходимо указать в адресной строке браузера после адреса веб-приложения. Если администратор не авторизован, то он будет перенаправлен на форму авторизации. 
После успешной авторизации администратор перенаправляется на стартовую страницу панели администрирования, содержащую список таблиц (рисунок 42).

 
Рисунок 42 – Стартовая страница панели администрирования
Для работы с записями администратору необходимо выбрать таблицу в списке слева. 
На рисунке 43 показан список сотрудников. В верхней части страницы расположена форма поиска по следующим параметрам: фамилия, звание. 
 
Рисунок 43 – Список сотрудников
Пример работы функции поиска показан на рисунке 44.
 
Рисунок 44 – Поиск по части фамилии
Поисковой запрос не зависит от регистра, возможен поиск как по полному совпадению, так и по частичному. На рисунке 45 показана форма добавления нового сотрудника.
 
Рисунок 45 – Добавление нового сотрудника
Для добавления нового сотрудника необходимо указать его полное имя, должность, отдел, звание, выбрать учетную запись для сотрудника и фотографию.
Для сотрудников реализована фильтрация по подразделениям. На рисунке 46 показана выборка сотрудников по подразделению «Канцелярия».

 
Рисунок 46 – Фильтрация сотрудников по отделу
На рисунке 47 показана таблица с должностями.
 
Рисунок 47 – Таблица «Должности»
Для должностей имеется поиск по названию, фильтрация отсутствует. На рисунке 48 показана форма для редактирования записи о должности.
 
Рисунок 48 – Редактирование записи о должности
Должности привязаны к подразделениям. При создании или изменении названия должности необходимо также указать подразделение, к которому она относится.
Исходный код сайта приведен в приложении А.
2.5 Руководство администратора
Для развертывания веб-приложения на сервере, администратору необходимо выполнить следующие действия:
	Установить на сервере дистрибутив Python.
	Установить клиент для СУБД SQLite.
	Установить текстовый редактор для просмотра исходного кода.
	Отредактировать конфигурационный файл с настройками, указав в нем название базы и другие параметры для подключения к ней.
	Создать каталог для проекта.
	Создать и активировать виртуальное окружение.
	Переместить в родительский каталог файлы сайта, включая базу данных.
	Установить зависимости из файла reqs.txt.
	Запустить сайт.

 
3 ОБОСНОВАНИЕ ЭКОНОМИЧЕСКОЙ ЭФФЕКТИВНОСТИ ОТ РАЗРАБОТКИ КОРПОРАТИВНОГО ТЕЛЕФОННОГО СПРАВОЧНИКА
Разработка корпоративного телефонного справочника ведется силами приглашенного ИТ-специалиста. Время, затраченное на разработку веб-приложения, составляет 6 месяцев. В указанный период входит временной промежуток, включающий начало разработки технического задания и окончание тестирования сайта в локальной сети организации.
Весь перечень работ по разработке веб-приложения выполняет один программист. Его рабочее место оборудовано персональным компьютером, стоимость которого составляет 60 тысяч рублей (в данную сумму включено и системное и прикладное программное обеспечение, установленное на компьютере). Разработка ведется на языке программирования Python (стоимость использования 0 руб.), с использованием текстового редактора Visual Studio Code (стоимость использования 0 руб.). Разработка базы данных ведется с использованием СУБД SQLite и клиентского приложения для СУБД, стоимость использования которых также составляет 0 руб. проектирование ведется в редакторе MS Visio. Установлен на рабочем компьютере, используется в повседневной работе. Затраты на разработку приведены в таблице 1.
Таблица 1 – Затраты на разработку сайта
Статья затрат	Сумма, руб.
Стоимость оборудования	(60000 ∙2∙6/12)/5=12000
Стоимость программного обеспечения, используемого при разработке (MS Visio)	(25100 ∙2∙6/12)/5=5020
Оплата труда программиста	30000∙6=180000
Начисления на оплату труда	180000∙0,306=55080
Косвенные расходы (содержание помещения, прочие расходы)	(10000∙60000)/250000∙6=14440
Итого:	266500
Так как компьютер используется и для решения других задач, в стоимости разработки целесообразно учесть часть его стоимости, согласно времени его прямого использования. Затраты на эксплуатацию компьютера включаются в косвенные расходы. Стоимость программного обеспечения также учитывается частично. Оклад программиста за месяц составляет 30000 рублей. Отчисления в фонды составляет 30,6%. Косвенные расходы на отдел разработки составляют 10000 рублей в месяц, ФОТ – 250000 рублей в месяц, помещение, оборудование и т.д. используются в течение 6 месяцев.
Затраты на внедрение приведены в таблице 2.
Таблица 2 – Затраты на внедрение справочника
Статья затрат	Сумма, руб.
Оборудование (МФУ)	8200
Оплата труда по установке	30000/168≈179
Затраты на обучение персонала	4∙(179+200)=1516
Затраты на обслуживание помещений	0
Итого:	9895

Внедрение телефонного справочника будет выполняться программистом. Обучение сотрудников работе с сайтом будет выполнено в рабочее время. При внедрении будет использовано МФУ. Установка веб-приложения на сервер организации займет 1 час рабочего времени программиста. Обучение сотрудников займет 4 часа. При обучении затрачивается как время программиста (разработчика), так и время обучаемых сотрудников. Час сотрудника стоит 200 рублей. В ходе обучения не учитываются затраты на обслуживание помещений, так как обучение проводится на базе организации.







Таблица 3 – Эксплуатационные расходы
Статья затрат	Сумма, руб.
Затраты на хостинг, домен, SSL за год	Хостинг: 22000
Домен: 1000
SSL: 4500
Оплата труда сотрудника, обеспечивающего сопровождение сайта	1∙247∙200=49400
Затраты на проведение профилактических работ	1∙12∙200=2400
Затраты на обслуживание помещений	0
Стоимость сбоев и простоев сайта	50000∙0,01=500
Самообучение и самостоятельное решение проблем	0
Итог:	79800

После тестовой эксплуатации в локальной сети организации понадобится приобретение домена, хостинга и SSL-сертификата. Эксплуатацию сайта обеспечивает 1 сотрудник. Профилактические работы проводятся каждый месяц в течение 1 часа. Стоимость ущерба от простоя веб-приложения более 5 дней составляет 50000 рублей в год. При этом, вероятность столь долговременного простоя не превышает 1%.
Затраты на разработку и внедрение составляют 276395 рублей. Эксплуатационные расходы: 79800 рублей. Дополнительная прибыль от эксплуатации справочника составляет 250000 рублей. Период: 3 года, ставка дисконтирования: 13%. Тогда, чистый приведенный доход составляет:
NPV= -276395+170200/(1+0,13)+170200/(1+0,13)^2 +  170200/(1+0,13)^3 ==125472,2 рублей. 
Внутренняя норма доходности: 38%.
Срок окупаемости капиталовложений составляет 1 год и 7 месяцев.
 
ЗАКЛЮЧЕНИЕ
В ходе выполнения дипломной работы разработан корпоративный телефонный справочник, выполняющий следующие функции:
	добавление, изменение, удаление записей о сотрудниках, их контактах, подразделениях, должностях, званиях;
	поиск записей по фамилии, должности, отделу, званию;
	авторизация в справочнике;
	отображение записей о контактах сотрудников;
	возможность использования контактов прямо из справочника (звонок при клике по номеру телефона, запуск почтового клиента при нажатии на почту);
	администрирование данных по контактам, пользователям, отделам, категориям.
В ходе выполнения дипломной работы решены следующие задачи:
	Изучены особенности процесса коммуникации в компании.
	Проведен обзор готовых решений.
	Сформулированы требования к корпоративному телефонному справочнику.
	Выбраны инструменты для разработки приложения.
	Разработан корпоративный телефонный справочник.
	Проведен расчет экономической эффективности для корпоративного телефонного справочника.
Для разработки использованы следующие инструменты:
	СУБД SQLite;
	язык программирования Python;
	фреимворк для веб-разработки Django.

 
СПИСОК ИСПОЛЬЗОВАННЫХ ИСТОЧНИКОВ
	Организация корпоративного телефонного справочника. URL: https://it-minsk.by/produkty/avtomatizirovannye-informatsionnye-sistemy/korporativnyj-telefonnyj-spravochnik (дата обращения: 26.05.2024).
	Бачурина, С.С. Информационное моделирование / С.С. Бачурина. – Москва: ДМК, 2021. – 112 c.
	Громов, А.И. Управление бизнес-процессами: современные методы. Монография / А.И. Громов, А. Фляйшман, В. Шмидт. – Москва: Юрайт, 2016. – 367 c.
	Лашина, М.В. Информационные системы и технологии в экономике и маркетинге: Учебное пособие / М.В. Лашина, Т.Г. Соловьев – Москва: КноРус, 2018. – 480 c.
	Манго Офис. Официальный сайт. URL: https://www.mango-office.ru/ (дата обращения: 26.05.2024).
	Телфин. Официальный сайт. URL: https://www.telphin.ru/ (дата обращения: 26.05.2024).
	Ростелеком АТС. Официальный сайт. URL: https://msk.rt.ru/b2b/telephony/vats (дата обращения: 26.05.2024).
	Рейтц, К. Автостопом по Python / К. Рейтц, Т. Шлюссер – Санкт-Петербург: Питер, 2017. – 336 с.
	Федоров, Д.Ю. Программирование на языке высокого уровня Python: учебное пособие для прикладного бакалавриата 2-е изд., перераб. и доп. // Юрайт: электр. версия. 2019. – 161 с. URL: https://urait.ru/bcode/437489. Дата публикации: 17.03.2019. Режим доступа: для зарегистрированных пользователей.
	Дронов, В.А. Django 3.0. Практика создания веб-сайтов на python / В.А. Дронов – Санкт-Петербург: БХВ-Петербург, 2021. – 704 с.
	Вайсфельд, М. Объектно-ориентированный подход / М. Вайсфельд – Москва: Питер, 2020. – 256 c.
	Фримен, Э. Паттерны проектирования / Э. Фримен – Москва: Питер, 2017. – 656 с.
	Мартин, Р. Чистый код. Создание, анализ и рефакторинг / Р. Мартин – Москва: Вильямс, 2021. – 464 с.
	Макконел, С. Совершенный код / С. Макконел – Москва: Русская редакция, 2017. – 896 с.
	SQLite. Официальный сайт. URL: https://www.sqlite.org (дата обращения: 26.05.2024).
	Дакетт, Дж. HTML и CSS. Разработка и дизайн веб-сайтов / Дж. Дакетт – Москва: Эксмо, 2022. – 480 c.
	Фрэйн, Б. Отзывчивый дизайн на HTML5 и CSS3 для любых устройств. 3-е изд. / Б. Фрэйн – Москва: Питер, 2022. – 336 c.
	Фримен, Э. Изучаем HTML, XHTML и CSS 2-е изд. / Э. Фримен, Э. Робсон – Москва: Питер, 2022. – 720 c.
	Кэмпбелл, Л. Базы данных. Инжиниринг надежности / Л. Кэмпбелл, Ч. Мейджорс – Москва: Питер, 2020. – 400 с. 
	Дейт, К. Введение в системы баз данных / К. Дейт – Москва: Юрайт, 2019. – 784 с.
	Конолли, Т. Базы данных. Проектирование, реализация и сопровождение. Теория и практика / Т. Конолли, К. Бегг – Москва: Вильямс, 2017. – 1440 с.
	Грофф, Дж., SQL. Полное руководство/ Дж. Грофф, П. Вайнберг – Москва: Вильямс, 2018. – 960 с. 
 
ПРИЛОЖЕНИЕ А
Исходный код
from django import views
from django.urls import path
from . import views

urlpatterns = [
    path('', views.home, name="home"),
    path('user_profile', views.user_profile, name="user_profile"),
    path('start_manager', views.start_manager, name="start_manager"),
    path('start_edit_contacts', views.start_edit_contacts, name="start_edit_contacts"),
    path('next/<aff_id>', views.next, name="next"),
    path('next_lvl/<aff_id>', views.next_lvl, name="next_lvl"),
    path('user_next_lvl/<aff_id>', views.user_next_lvl, name="user_next_lvl"),
    path('show_contacts/<emp_id>', views.show_contacts, name="show_contacts"),
    path('show__contacts/<emp_id>', views.show__contacts, name="show__contacts"),
    path('show_prof_contacts/<emp_id>', views.show_prof_contacts, name="show_prof_contacts"),
    path('add_contact/<emp_id>', views.add_contact, name="add_contact"),    
    path('edit_contact/<c_id>', views.edit_contact, name="edit_contact"),    
    path('del_contact/<c_id>', views.del_contact, name="del_contact"),
    path('search_contacts', views.search_contacts, name="search_contacts"),
    path('user_search_contacts', views.user_search_contacts, name="user_search_contacts"),
]
from django.shortcuts import render, redirect
from django.contrib import messages
from employees.models import Category, Contact, Department, DepartmentType, Employee
from django.db.models import Q

def home(request):
    return render(request, 'home.html', {})


def user_profile(request):
    curr_user = request.user
    employee = Employee.objects.filter(user_id=curr_user.id)[0]
    d_id = get_parent_dep(employee.department.id)
    dep = Department.objects.get(pk=d_id)    
    return render(request, 'profile.html', {'employee': employee, 'dep': dep})


def get_parent_dep(did):
    while True:
        dep = Department.objects.get(pk=did)
        if dep is not None:
            if dep.dep_type.title == 'Учреждение':
                break
            else:
                did = dep.parent_dep
    return did

def start_manager(request):
    curr_user = request.user
    employee = Employee.objects.filter(user_id=curr_user.id)[0]
    d_id = get_parent_dep(employee.department.id)
    dep = Department.objects.get(pk=d_id)
    return render(request, 'start_manager.html', {'employee': employee, 'dep': dep})


def start_edit_contacts(request):
    curr_user = request.user
    employee = Employee.objects.filter(user_id=curr_user.id)[0]
    affiliateds = Department.objects.filter(parent_dep=employee.department.parent_dep)
    dep = Department.objects.get(pk=employee.department.parent_dep)
    return render(request, 'start_edit_conts.html', {'affiliateds': affiliateds, 'dep': dep})


def next(request, aff_id):
    affiliateds = Department.objects.filter(parent_dep=aff_id)
    dep = Department.objects.get(pk=aff_id)
    if affiliateds.count() == 0:
        employees = Employee.objects.filter(department_id=aff_id)
        return render(request, 'emps_list.html', {'employees': employees, 'dep': dep})
    else:        
        return render(request, 'start_edit_conts.html', {'affiliateds': affiliateds, 'dep': dep})


def show_contacts(request, emp_id):
    contacts = Contact.objects.filter(employee_id=emp_id).order_by('category')
    emp = Employee.objects.get(pk=emp_id)
    return render(request, 'emp_conts.html', {'contacts': contacts, 'emp': emp})


def show__contacts(request, emp_id):
    contacts = Contact.objects.filter(employee_id=emp_id).order_by('category')
    emp = Employee.objects.get(pk=emp_id)
    return render(request, 'employee_conts.html', {'contacts': contacts, 'emp': emp})


def show_prof_contacts(request, emp_id):
    contacts = Contact.objects.filter(employee_id=emp_id).order_by('category')
    emp = Employee.objects.get(pk=emp_id)
    return render(request, 'e_conts.html', {'contacts': contacts, 'emp': emp})


def add_contact(request, emp_id):
    emp = Employee.objects.get(pk=emp_id)
    categories = Category.objects.all()
    if request.method == "POST":
        con_val = request.POST["conval"]
        cat_id = request.POST["cat"]
        if not con_val:
            messages.success(request, ("Заполните поля!"))
            return render(request, 'add_cont.html', {'categories': categories, 'emp': emp})
        else:
            category = Category.objects.get(pk=cat_id)
            contact = Contact(category=category, contact_value=con_val, employee=emp)
            contact.save()
            messages.success(request, ("Контакт добавлен."))
            contacts = Contact.objects.filter(employee_id=emp_id).order_by('category')
            return render(request, 'emp_conts.html', {'contacts': contacts, 'emp': emp})            
    else:
        return render(request, 'add_cont.html', {'categories': categories, 'emp': emp})
    


def edit_contact(request, c_id):
    contact = Contact.objects.get(pk=c_id)
    categories = Category.objects.all()
    if request.method == "POST":
        con_val = request.POST["conval"]
        cat_id = request.POST["cat"]
        if not con_val:
            messages.success(request, ("Заполните поля!"))
            return render(request, 'edit_cont.html', {'contact':contact,  'categories': categories})
        else:
            category = Category.objects.get(pk=cat_id)
            contact.category=category
            contact.contact_value = con_val
            contact.save()
            messages.success(request, ("Контакт изменен."))
            contacts = Contact.objects.filter(employee_id=contact.employee.id).order_by('category')
            return render(request, 'emp_conts.html', {'contacts': contacts, 'emp': contact.employee}) 
    else:
        return render(request, 'edit_cont.html', {'contact':contact,  'categories': categories})
    


def del_contact(request, c_id):
    contact = Contact.objects.get(pk=c_id)
    contact.delete()
    messages.success(request, ("Контакт удален."))
    contacts = Contact.objects.filter(employee_id=contact.employee.id).order_by('category')
    return render(request, 'emp_conts.html', {'contacts': contacts, 'emp': contact.employee})  


def search_contacts(request):
    dt_id = DepartmentType.objects.filter(title='Учреждение')[0]
    departments = Department.objects.filter(dep_type_id=dt_id.id)    
    if request.method == "POST":        
        did = request.POST["dep"]
        subs = Department.objects.filter(parent_dep=did) 
        dep = Department.objects.get(pk=did)       
        return render(request, 'show_subs.html', {'affiliateds': subs, 'dep': dep})
    else:
        return render(request, 'search_results.html', {'departments': departments})    
    

def user_search_contacts(request):
    dt_id = DepartmentType.objects.filter(title='Учреждение')[0]
    departments = Department.objects.filter(dep_type_id=dt_id.id)    
    if request.method == "POST":        
        did = request.POST["dep"]
        subs = Department.objects.filter(parent_dep=did) 
        dep = Department.objects.get(pk=did)       
        return render(request, 'user_show_subs.html', {'affiliateds': subs, 'dep': dep}) 
    else:
        return render(request, 'user_search_results.html', {'departments': departments})  
    

def next_lvl(request, aff_id):
    affiliateds = Department.objects.filter(parent_dep=aff_id)
    dep = Department.objects.get(pk=aff_id)
    if affiliateds.count() == 0:
        employees = Employee.objects.filter(department_id=aff_id)
        if request.method == "POST":
            ln = request.POST["lname"]
            rn = request.POST["rank"]
            if ln == '' and rn == '':
             messages.success(request, ("Укажите хотя бы один параметр!"))
            elif ln != '' and rn == '':
                employees = employees.filter(efname__icontains=ln)
            elif ln == '' and rn != '':
                employees = employees.filter(rank__icontains=rn)
            elif ln != '' and rn != '':
                employees = employees.filter(Q(efname__icontains=ln) & Q(rank__icontains=rn))        
        return render(request, 'emps.html', {'employees': employees, 'dep': dep})
    else:        
        return render(request, 'show_subs.html', {'affiliateds': affiliateds, 'dep': dep})
    

def user_next_lvl(request, aff_id):
    affiliateds = Department.objects.filter(parent_dep=aff_id)
    dep = Department.objects.get(pk=aff_id)
    if affiliateds.count() == 0:
        employees = Employee.objects.filter(department_id=aff_id)
        if request.method == "POST":
            ln = request.POST["lname"]
            rn = request.POST["rank"]
            if ln == '' and rn == '':
             messages.success(request, ("Укажите хотя бы один параметр!"))
            elif ln != '' and rn == '':
                employees = employees.filter(efname__icontains=ln)
            elif ln == '' and rn != '':
                employees = employees.filter(rank__icontains=rn)
            elif ln != '' and rn != '':
                employees = employees.filter(Q(efname__icontains=ln) & Q(rank__icontains=rn))        
        return render(request, 'user_emps.html', {'employees': employees, 'dep': dep}) 
    else:        
        return render(request, 'user__show_subs.html', {'affiliateds': affiliateds, 'dep': dep})
from django.urls import path, include
from . import views

urlpatterns = [
   path('login_user', views.login_user, name="login"),
   path('logout_user', views.logout_user, name="logout"),
   path('register_user', views.register_user, name="register_user"),   
]
from django.shortcuts import render, redirect
from django.contrib.auth import authenticate, login, logout
from django.contrib.auth.models import Group
from django.contrib import messages
from employees.models import Employee
from .forms import RegisterUserForm
from django.db.models import Q


def login_user(request):
    if request.method == "POST":
        username = request.POST['username']
        password = request.POST['password']
        user = authenticate(request, username=username, password=password)
        if user is not None:
            login(request, user)
            if user.groups.filter(name='users').exists():
                return redirect('user_profile')
            if user.groups.filter(name='managers').exists():
                return redirect('start_manager')
            return redirect('home')
        else:
            messages.success(request, ("Ошибка авторизации"))
            return redirect('login')
    else:
        return render(request, 'authentification/login.html', {})


def logout_user(request):
    logout(request)
    messages.success(request, ("Выход из учетной записи"))
    return redirect('home')


def register_user(request):
    if request.method == "POST":
        form = RegisterUserForm(request.POST)
        if form.is_valid():
            form.save()
            username = form.cleaned_data['username']
            password = form.cleaned_data['password1']
            user = authenticate(username=username, password=password)
            user_group = Group.objects.get(name='users')
            user_group.user_set.add(user)
            login(request, user)
            employee = Employee(efname='', ename='', epatronymic='', place=None, department=None,  rank='', img='', user=user)
            employee.save()
            messages.success(request, ("Вы зарегистрированы."))
            return redirect('home')
    else:
        form = RegisterUserForm()
    return render(request, 'authentification/register_user.html', {'form': form, })
from django.db import models
from django.contrib.auth.models import User


class Category(models.Model):
    title = models.CharField('Название', max_length=255)

    def __str__(self):
        return self.title

    class Meta:
        verbose_name = ('Категория')
        verbose_name_plural = ('Категории')


class DepartmentType(models.Model):
    title = models.CharField('Название', max_length=255)    

    def __str__(self):
        return self.title

    class Meta:
        verbose_name = ('Вид подразделения')
        verbose_name_plural = ('Виды подразделений')


class Department(models.Model):
    title = models.CharField('Название', max_length=255)
    description = models.TextField('Описание', max_length=7000)
    dep_type = models.ForeignKey(DepartmentType, verbose_name='Тип подразделения', null=True, blank=True, on_delete=models.DO_NOTHING)
    parent_dep = models.IntegerField('Вышестоящее подразделение', null=True, blank=True)

    def __str__(self):
        return self.title

    class Meta:
        verbose_name = ('Отдел')
        verbose_name_plural = ('Отделы')


class Place(models.Model):
    title = models.CharField('Название', max_length=255)
    department = models.ForeignKey(Department, verbose_name='Подразделение', null=True, blank=True, on_delete=models.DO_NOTHING)

    def __str__(self):
        return self.title

    class Meta:
        verbose_name = ('Должность')
        verbose_name_plural = ('Должность')


class Employee(models.Model):
    efname = models.CharField('Фамилия', max_length=80)
    ename = models.CharField('Имя', max_length=80)
    epatronymic = models.CharField('Отчество', max_length=80, null=True)
    place = models.ForeignKey(
        Place, verbose_name='Должность', blank=True, null=True, on_delete=models.DO_NOTHING)
    department = models.ForeignKey(
        Department, verbose_name='Отдел', blank=True, null=True, on_delete=models.DO_NOTHING)    
    rank = models.CharField('Звание', max_length=80)
    user = models.OneToOneField(
        User, blank=True, null=True, on_delete=models.SET_NULL)
    img = models.ImageField(
        'Фото', null=True, blank=True, upload_to="images/")    

    def __str__(self):
        return self.efname+' '+self.ename+' '+self.epatronymic

    class Meta:
        verbose_name = ('Сотрудник')
        verbose_name_plural = ('Сотрудники')


class Contact(models.Model):
    category = models.ForeignKey(
        Category, verbose_name='Категория', null=True, blank=True, on_delete=models.DO_NOTHING)
    contact_value = models.CharField('Значение контакта', max_length=255)
    employee = models.ForeignKey(
        Employee, verbose_name='Сотрудник', null=True, blank=True, on_delete=models.DO_NOTHING)

    def __str__(self):
        return str(self.contact_value) + str(", ") + str(self.category)

    class Meta:
        verbose_name = ('Контакт')
        verbose_name_plural = ('Контакты')
from django.contrib import admin

from employees.models import Category, Contact, Department, DepartmentType, Employee, Place


@admin.register(Category)
class CategoryAdmin(admin.ModelAdmin):
    list_display = ('title',)
    ordering = ('title',)
    search_fields = ('title',)


@admin.register(DepartmentType)
class DepartmentTypeAdmin(admin.ModelAdmin):
    list_display = ('title',)
    ordering = ('title',)
    search_fields = ('title',)


@admin.register(Department)
class DepartmentAdmin(admin.ModelAdmin):
    list_display = ('id', 'title', 'description', 'dep_type', 'parent_dep')
    ordering = ('title',)
    search_fields = ('title', 'description', 'dep_type')
    list_filter = ('dep_type',)


@admin.register(Place)
class PlaceAdmin(admin.ModelAdmin):
    list_display = ('title', 'department')
    ordering = ('title',)
    search_fields = ('title', 'department')


@admin.register(Employee)
class EmployeeAdmin(admin.ModelAdmin):
    list_display = ('efname', 'ename', 'epatronymic', 'place', 
                    'department', 'rank', 'user', 'img')
    ordering = ('efname',)
    search_fields = ('efname', 'rank')
    list_filter = ('department',)


@admin.register(Contact)
class ContactAdmin(admin.ModelAdmin):
    list_display = ('category', 'contact_value', 'employee')
    ordering = ('category',)
    search_fields = ('category', 'contact_value')
    list_filter = ('category',)

    from django.contrib import admin
from django.urls import path, include
from django.conf import settings
from django.conf.urls.static import static
urlpatterns = [
    path('admin/', admin.site.urls),
    path('', include('clients.urls')),
    path('members/', include('django.contrib.auth.urls')),
    path('members/', include('members.urls')),    
] + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
from django.urls import path, include
from . import views
urlpatterns = [    
    path('login_user', views.login_user, name="login"),
    path('register_user', views.register_user, name="register_user"),
    path('register', views.register, name="register"),
    path('logout_user', views.logout_user, name="logout"), ]
from django.shortcuts import render, redirect
from django.contrib.auth import authenticate, login, logout
from django.contrib.auth.models import Group
from django.contrib import messages
from django.contrib.auth.forms import UserCreationForm
from clients.models import Client
from .forms import RegisterUserForm
def login_user(request):
    if request.method == "POST":
        username = request.POST['username']
        password = request.POST['password']
        user = authenticate(request, username=username, password=password)
        if user is not None:
            login(request, user)
            if user.groups.filter(name='clients').exists():
                return redirect('home')
            if user.groups.filter(name='workers').exists():
                return redirect('home')
            return redirect('home')
        else:
            messages.success(request, ("Ошибка авторизации"))
            return redirect('login')
    else:
        return render(request, 'authentification/login.html', {})
def register_user(request):
    if request.method == "POST":
        form = RegisterUserForm(request.POST)
        if form.is_valid():
            form.save()
            username = form.cleaned_data['username']
            password = form.cleaned_data['password1']
            user = authenticate(username=username, password=password)
            if request.session['urole'] == 'client':
                user_group = Group.objects.get(name='clients')
                user_group.user_set.add(user)
                client = Client(title='', phone='', email=user.email, user=user) 
                client.save()
            else:
                user_group = Group.objects.get(name='workers')
                user_group.user_set.add(user)            
            login(request, user)            
            messages.success(request, ("Вы зарегистрированы."))
            return redirect('home')
    else:
        form = RegisterUserForm()
    return render(request, 'authentification/register_user.html', {'form': form })
def register(request):
    if request.method == "POST":
        _role = request.POST['role']
        if _role == "worker":
            request.session['urole'] = 'worker'
        else:
            request.session['urole'] = 'client'
        return redirect('register_user')
    else:
        return render(request, 'authentification/register.html', {})
def logout_user(request):
    logout(request)
    messages.success(request, ("Выход из учетной записи"))
    return redirect('login') 
from django import views
from django.urls import path
from . import views
urlpatterns = [
    path('', views.home, name="home"),    
    path('show_subs/<cat_id>', views.show_subs, name="show_subs"),
    path('workers/<sub_id>', views.workers, name="workers"),    
    path('show_offer/<w_id>/<s_id>', views.show_offer, name="show_offer"),
    path('add_order/<o_id>', views.add_order, name="add_order"),
    path('my_orders', views.my_orders, name="my_orders"),
]
import datetime
from django.shortcuts import render, redirect
from django.db.models import Q
from django.contrib import messages
from clients.models import Category, Client, Offer, Order, SubCategory, Worker
def home(request):
    categories = Category.objects.all()
    return render(request, 'home.html', {'categories': categories})
def show_subs(request, cat_id):
    subs = SubCategory.objects.filter(category_id=cat_id)
    category = Category.objects.get(pk=cat_id)
    return render(request, 'subs.html', {'subs': subs, 'category': category})
def workers(request, sub_id):
    workers = Worker.objects.filter(sub_cats__id=sub_id)
    s_category = SubCategory.objects.get(pk=sub_id)
    return render(request, 'workers.html', {'workers': workers, 's_category': s_category})
def show_offer(request, w_id, s_id):
    offer = Offer.objects.filter(Q(worker_id=w_id) & Q(sub_category_id=s_id))[0]    
    return render(request, 'show_offer.html', {'offer': offer, 'sid': s_id})
def add_order(request, o_id):
    if not request.user.is_authenticated:
        return redirect('login')
    else:
        offer = Offer.objects.get(pk=o_id)
        client = Client.objects.filter(user_id=request.user.id)[0]
        if request.method == "POST":
            edate = request.POST['edate']
            amount = request.POST['amount']
            comment = request.POST['comm']
            e_date = datetime.datetime.strptime(edate, "%Y-%m-%d").date() 
            s_date = datetime.date.today()                  
            order = Order(offer=offer, sdate=s_date, edate=e_date,  amount=amount, comment=comment, total=offer.price*int(amount), client=client, status='создан')
            order.save()             
            messages.success(request, ("Заказ создан. Дождитесь подтверждения от исполнителя."))            
            return redirect('my_orders') 
        else:
            return render(request, 'add_order.html', {})
def my_orders(request):
    client = Client.objects.filter(user_id=request.user.id)[0]    
    if request.method == "POST":
        e_date = request.POST['edate']
        comm = request.POST['comm']
        if e_date == '' and comm == '':
            orders = Order.objects.filter(client_id=client.id)
        elif e_date != '' and comm == '':
            orders = Order.objects.filter(Q(client_id=client.id) & Q(edate=e_date)) 
        elif e_date =='' and comm !='':
            orders = Order.objects.filter(Q(client_id=client.id) & Q(comment__contains=comm))
        elif e_date !='' and comm !='':
            orders = Order.objects.filter(Q(client_id=client.id) & Q(edate=e_date) & Q(comment__contains=comm))
        else:             orders = Order.objects.filter(client_id=client.id)
    else:         orders = Order.objects.filter(client_id=client.id)
    return render(request, 'my_orders.html', {'client': client, 'orders': orders})

    -- phpMyAdmin SQL Dump
    -- version 5.0.4
    -- https://www.phpmyadmin.net/
    --
    -- Хост: localhost
    -- Время создания: Апр 13 2024 г., 13:31
    -- Версия сервера: 8.0.22
    -- Версия PHP: 7.4.12
    
    SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
    START TRANSACTION;
    SET time_zone = "+00:00";
    
    
    /*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
    /*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
    /*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
    /*!40101 SET NAMES utf8mb4 */;
    
    --
    -- База данных: `businessdb`
    --
    
    -- --------------------------------------------------------
    
    --
    -- Структура таблицы `auth_group`
    --
    
    CREATE TABLE `auth_group` (
      `id` int NOT NULL,
      `name` varchar(150) NOT NULL
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
    
    --
    -- Дамп данных таблицы `auth_group`
    --
    
    INSERT INTO `auth_group` (`id`, `name`) VALUES
    (1, 'clients'),
    (2, 'workers');
    
    -- --------------------------------------------------------
    
    --
    -- Структура таблицы `auth_group_permissions`
    --
    
    CREATE TABLE `auth_group_permissions` (
      `id` bigint NOT NULL,
      `group_id` int NOT NULL,
      `permission_id` int NOT NULL
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
    
    -- --------------------------------------------------------
    
    --
    -- Структура таблицы `auth_permission`
    --
    
    CREATE TABLE `auth_permission` (
      `id` int NOT NULL,
      `name` varchar(255) NOT NULL,
      `content_type_id` int NOT NULL,
      `codename` varchar(100) NOT NULL
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
    
    --
    -- Дамп данных таблицы `auth_permission`
    --
    
    INSERT INTO `auth_permission` (`id`, `name`, `content_type_id`, `codename`) VALUES
    (1, 'Can add log entry', 1, 'add_logentry'),
    (2, 'Can change log entry', 1, 'change_logentry'),
    (3, 'Can delete log entry', 1, 'delete_logentry'),
    (4, 'Can view log entry', 1, 'view_logentry'),
    (5, 'Can add permission', 2, 'add_permission'),
    (6, 'Can change permission', 2, 'change_permission'),
    (7, 'Can delete permission', 2, 'delete_permission'),
    (8, 'Can view permission', 2, 'view_permission'),
    (9, 'Can add group', 3, 'add_group'),
    (10, 'Can change group', 3, 'change_group'),
    (11, 'Can delete group', 3, 'delete_group'),
    (12, 'Can view group', 3, 'view_group'),
    (13, 'Can add user', 4, 'add_user'),
    (14, 'Can change user', 4, 'change_user'),
    (15, 'Can delete user', 4, 'delete_user'),
    (16, 'Can view user', 4, 'view_user'),
    (17, 'Can add content type', 5, 'add_contenttype'),
    (18, 'Can change content type', 5, 'change_contenttype'),
    (19, 'Can delete content type', 5, 'delete_contenttype'),
    (20, 'Can view content type', 5, 'view_contenttype'),
    (21, 'Can add session', 6, 'add_session'),
    (22, 'Can change session', 6, 'change_session'),
    (23, 'Can delete session', 6, 'delete_session'),
    (24, 'Can view session', 6, 'view_session'),
    (25, 'Can add Категория', 7, 'add_category'),
    (26, 'Can change Категория', 7, 'change_category'),
    (27, 'Can delete Категория', 7, 'delete_category'),
    (28, 'Can view Категория', 7, 'view_category'),
    (29, 'Can add Подкатегория', 8, 'add_subcategory'),
    (30, 'Can change Подкатегория', 8, 'change_subcategory'),
    (31, 'Can delete Подкатегория', 8, 'delete_subcategory'),
    (32, 'Can view Подкатегория', 8, 'view_subcategory'),
    (33, 'Can add worker', 9, 'add_worker'),
    (34, 'Can change worker', 9, 'change_worker'),
    (35, 'Can delete worker', 9, 'delete_worker'),
    (36, 'Can view worker', 9, 'view_worker'),
    (37, 'Can add Предложение', 10, 'add_offer'),
    (38, 'Can change Предложение', 10, 'change_offer'),
    (39, 'Can delete Предложение', 10, 'delete_offer'),
    (40, 'Can view Предложение', 10, 'view_offer'),
    (41, 'Can add Клиент', 11, 'add_client'),
    (42, 'Can change Клиент', 11, 'change_client'),
    (43, 'Can delete Клиент', 11, 'delete_client'),
    (44, 'Can view Клиент', 11, 'view_client'),
    (45, 'Can add Заказ', 12, 'add_order'),
    (46, 'Can change Заказ', 12, 'change_order'),
    (47, 'Can delete Заказ', 12, 'delete_order'),
    (48, 'Can view Заказ', 12, 'view_order'),
    (49, 'Can add Сообщение', 13, 'add_omessage'),
    (50, 'Can change Сообщение', 13, 'change_omessage'),
    (51, 'Can delete Сообщение', 13, 'delete_omessage'),
    (52, 'Can view Сообщение', 13, 'view_omessage'),
    (53, 'Can add Отзыв', 14, 'add_feedback'),
    (54, 'Can change Отзыв', 14, 'change_feedback'),
    (55, 'Can delete Отзыв', 14, 'delete_feedback'),
    (56, 'Can view Отзыв', 14, 'view_feedback');
    
    -- --------------------------------------------------------
    
    --
    -- Структура таблицы `auth_user`
    --
    
    CREATE TABLE `auth_user` (
      `id` int NOT NULL,
      `password` varchar(128) NOT NULL,
      `last_login` datetime(6) DEFAULT NULL,
      `is_superuser` tinyint(1) NOT NULL,
      `username` varchar(150) NOT NULL,
      `first_name` varchar(150) NOT NULL,
      `last_name` varchar(150) NOT NULL,
      `email` varchar(254) NOT NULL,
      `is_staff` tinyint(1) NOT NULL,
      `is_active` tinyint(1) NOT NULL,
      `date_joined` datetime(6) NOT NULL
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
    
    --
    -- Дамп данных таблицы `auth_user`
    --
    
    INSERT INTO `auth_user` (`id`, `password`, `last_login`, `is_superuser`, `username`, `first_name`, `last_name`, `email`, `is_staff`, `is_active`, `date_joined`) VALUES
    (1, 'pbkdf2_sha256$720000$jwIKw7h3qiakJUvUbkVaP4$rPuE3G92QNLjtDieFeUyYbzMqzwAEl0IAj966rU2F+g=', '2024-04-13 10:23:23.686457', 1, 'admin', '', '', 'ad@min.nm', 1, 1, '2024-04-08 13:12:08.156010'),
    (2, 'pbkdf2_sha256$720000$lJTZ3aXaEuGZiV8l16g0rI$Wl2jEq/aX+UxAzh+J1TnU2s+gQB/nK2QEg3+CqXLtiY=', '2024-04-13 13:06:59.348175', 0, 'user1', '', '', 'test@tt.cc', 0, 1, '2024-04-09 08:30:07.994207'),
    (3, 'pbkdf2_sha256$720000$E3qpJO1zCDBhDSLJx9vf6E$u7v90BAaWFZ9AxBhc+9jl7YFonyjZNwRgOFTfJmSrtk=', '2024-04-09 08:32:37.421295', 0, 'user2', '', '', 'serge@mail.com', 0, 1, '2024-04-09 08:32:36.696467'),
    (4, 'pbkdf2_sha256$720000$joZa9hVeyFgOy0EqK0xUF7$SOl1UqHsZebLZz7OldP88WHV7XHUQEwd1+9EzTk0RNo=', '2024-04-09 11:28:11.042555', 0, 'user3', '', '', 'dfer@mail.com', 0, 1, '2024-04-09 11:28:10.302780'),
    (6, 'pbkdf2_sha256$720000$wKb4v9ZwfFI833dD7xDj9J$FdutV2i6eiFz6Z2H0Ag4t2sk0jhr9Ud196ztX9/anDg=', '2024-04-12 14:22:06.580793', 0, 'user5', '', '', 'elena@mail.com', 0, 1, '2024-04-12 14:22:05.821824'),
    (7, 'pbkdf2_sha256$720000$nTbSTEpfDbR1tt9upf0P9c$WiJcFEgiF3EpB4ZlVnhB8O4waSct1H8q43YHOL3GFoM=', '2024-04-12 14:23:51.440531', 0, 'user6', '', '', 'elenae@mail.com', 0, 1, '2024-04-12 14:23:50.705384'),
    (9, 'pbkdf2_sha256$720000$LTJjGKmpFxh5H3bDXEHViD$P27cd6Gwl6lLbTgjhzOhkQNrsiL2KXgTmKae2Vy4cj8=', '2024-04-13 06:54:05.300578', 0, 'user4', '', '', 'wrr@mail.com', 0, 1, '2024-04-13 06:54:04.566265'),
    (10, 'pbkdf2_sha256$720000$Mqv6Aq8liWBH0YA1TSjLZR$scEHZSLDI3YpQmn3QdlVRUtGeQbmjGsMI2sMEhxu7gU=', '2024-04-13 13:07:19.867617', 0, 'user7', '', '', 'bvbvb@mail.gh', 0, 1, '2024-04-13 06:56:17.926020');
    
    -- --------------------------------------------------------
    
    --
    -- Структура таблицы `auth_user_groups`
    --
    
    CREATE TABLE `auth_user_groups` (
      `id` bigint NOT NULL,
      `user_id` int NOT NULL,
      `group_id` int NOT NULL
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
    
    --
    -- Дамп данных таблицы `auth_user_groups`
    --
    
    INSERT INTO `auth_user_groups` (`id`, `user_id`, `group_id`) VALUES
    (1, 2, 1),
    (2, 3, 1),
    (3, 4, 1),
    (5, 6, 1),
    (6, 7, 1),
    (8, 9, 2),
    (9, 10, 2);
    
    -- --------------------------------------------------------
    
    --
    -- Структура таблицы `auth_user_user_permissions`
    --
    
    CREATE TABLE `auth_user_user_permissions` (
      `id` bigint NOT NULL,
      `user_id` int NOT NULL,
      `permission_id` int NOT NULL
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
    
    -- --------------------------------------------------------
    
    --
    -- Структура таблицы `clients_category`
    --
    
    CREATE TABLE `clients_category` (
      `id` bigint NOT NULL,
      `title` varchar(255) NOT NULL,
      `img` varchar(100) DEFAULT NULL
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
    
    --
    -- Дамп данных таблицы `clients_category`
    --
    
    INSERT INTO `clients_category` (`id`, `title`, `img`) VALUES
    (1, 'Разработка и IT', 'images/app-development.png'),
    (2, 'Дизайн', 'images/graphic-designer.png'),
    (3, 'Соцсети и реклама', 'images/social-media.png'),
    (4, 'SEO и трафик', 'images/seo.png'),
    (5, 'Тексты и переводы', 'images/text.png');
    
    -- --------------------------------------------------------
    
    --
    -- Структура таблицы `clients_client`
    --
    
    CREATE TABLE `clients_client` (
      `id` bigint NOT NULL,
      `title` varchar(255) NOT NULL,
      `phone` varchar(255) NOT NULL,
      `email` varchar(255) NOT NULL,
      `user_id` int DEFAULT NULL
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
    
    --
    -- Дамп данных таблицы `clients_client`
    --
    
    INSERT INTO `clients_client` (`id`, `title`, `phone`, `email`, `user_id`) VALUES
    (1, 'ООО \"Спарта\"', '334-759', 'test@tt.cc', 2),
    (2, '', '', 'serge@mail.com', 3),
    (3, '', '', 'dfer@mail.com', 4),
    (5, '', '', 'elena@mail.com', 6),
    (6, '', '', 'elenae@mail.com', 7);
    
    -- --------------------------------------------------------
    
    --
    -- Структура таблицы `clients_feedback`
    --
    
    CREATE TABLE `clients_feedback` (
      `id` bigint NOT NULL,
      `mark` int NOT NULL,
      `ftext` longtext NOT NULL,
      `order_id` bigint NOT NULL,
      `sdate` date DEFAULT NULL
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
    
    --
    -- Дамп данных таблицы `clients_feedback`
    --
    
    INSERT INTO `clients_feedback` (`id`, `mark`, `ftext`, `order_id`, `sdate`) VALUES
    (1, 4, 'Все хорошо', 1, '2024-04-13');
    
    -- --------------------------------------------------------
    
    --
    -- Структура таблицы `clients_offer`
    --
    
    CREATE TABLE `clients_offer` (
      `id` bigint NOT NULL,
      `title` varchar(255) NOT NULL,
      `price` int NOT NULL,
      `descr` longtext NOT NULL,
      `img` varchar(100) DEFAULT NULL,
      `sub_category_id` bigint NOT NULL,
      `worker_id` bigint NOT NULL
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
    
    --
    -- Дамп данных таблицы `clients_offer`
    --
    
    INSERT INTO `clients_offer` (`id`, `title`, `price`, `descr`, `img`, `sub_category_id`, `worker_id`) VALUES
    (1, 'Продвижение сайта в ТОП-10', 100000, 'Продвижение Вашего сайта в первую десятку по определенному запросу.', 'images/top-10.png', 11, 3),
    (2, 'Дизайн визитки любой сложности', 5000, 'Разработаем визитку под Ваш запрос и корпоративный стиль. В стоимость входит один вариант дизайна.', 'images/design.png', 6, 5),
    (4, 'k', 7, ' k', 'images/color-palette.png', 1, 7),
    (6, '4', 4, ' 4', 'images/design.png', 1, 7);
    
    -- --------------------------------------------------------
    
    --
    -- Структура таблицы `clients_omessage`
    --
    
    CREATE TABLE `clients_omessage` (
      `id` bigint NOT NULL,
      `mtext` longtext NOT NULL,
      `sdate` date NOT NULL,
      `order_id` bigint NOT NULL,
      `sender_id` int NOT NULL
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
    
    --
    -- Дамп данных таблицы `clients_omessage`
    --
    
    INSERT INTO `clients_omessage` (`id`, `mtext`, `sdate`, `order_id`, `sender_id`) VALUES
    (1, 't', '2024-04-13', 1, 2),
    (2, 'fgfg', '2024-04-13', 1, 2),
    (3, 'gfg', '2024-04-13', 1, 2),
    (4, 'hjhjhj', '2024-04-13', 5, 10),
    (5, '556hhj', '2024-04-13', 5, 2);
    
    -- --------------------------------------------------------
    
    --
    -- Структура таблицы `clients_order`
    --
    
    CREATE TABLE `clients_order` (
      `id` bigint NOT NULL,
      `sdate` date NOT NULL,
      `edate` date NOT NULL,
      `amount` int NOT NULL,
      `comment` longtext NOT NULL,
      `total` double NOT NULL,
      `client_id` bigint NOT NULL,
      `offer_id` bigint NOT NULL,
      `status` varchar(100) DEFAULT NULL
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
    
    --
    -- Дамп данных таблицы `clients_order`
    --
    
    INSERT INTO `clients_order` (`id`, `sdate`, `edate`, `amount`, `comment`, `total`, `client_id`, `offer_id`, `status`) VALUES
    (1, '2024-04-09', '2024-04-20', 1, '1', 5000, 1, 2, 'завершен'),
    (2, '2024-04-09', '2024-04-26', 1, '1', 5000, 1, 2, 'в работе'),
    (3, '2024-04-12', '2024-04-30', 1, 'Синий, красный, черный. Логотип торговой компании.', 5000, 6, 2, 'в работе'),
    (4, '2024-04-13', '2024-05-01', 1, '1', 5000, 1, 2, 'в работе'),
    (5, '2024-04-13', '2024-04-19', 1, 'uiuyuyu', 7, 1, 4, 'завершен');
    
    -- --------------------------------------------------------
    
    --
    -- Структура таблицы `clients_subcategory`
    --
    
    CREATE TABLE `clients_subcategory` (
      `id` bigint NOT NULL,
      `title` varchar(255) NOT NULL,
      `category_id` bigint NOT NULL,
      `img` varchar(100) DEFAULT NULL
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
    
    --
    -- Дамп данных таблицы `clients_subcategory`
    --
    
    INSERT INTO `clients_subcategory` (`id`, `title`, `category_id`, `img`) VALUES
    (1, 'Новый сайт', 1, 'images/web-site.png'),
    (2, 'Верстка по макету', 1, 'images/web-development_3.png'),
    (3, 'Ускорение сайта', 1, 'images/innovation.png'),
    (4, 'Логотипы', 2, 'images/logo-design.png'),
    (5, 'Фирменный стиль', 2, 'images/color-palette.png'),
    (6, 'Визитки', 2, 'images/id-card.png'),
    (7, 'Вконтакте', 3, 'images/vkontakte.png'),
    (8, 'Дзен', 3, 'images/christmas-stars.png'),
    (9, 'Telegram', 3, 'images/telegram.png'),
    (10, 'Ссылки', 4, 'images/link.png'),
    (11, 'Продвижение сайта в ТОП', 4, 'images/arrows.png'),
    (12, 'SEO-аудиты', 4, 'images/seo-search-symbol.png'),
    (13, 'Статьи', 5, 'images/newspaper.png'),
    (14, 'Карточки товаров', 5, 'images/online-payment.png'),
    (15, 'Сценарии', 5, 'images/script.png');
    
    -- --------------------------------------------------------
    
    --
    -- Структура таблицы `clients_worker`
    --
    
    CREATE TABLE `clients_worker` (
      `id` bigint NOT NULL,
      `title` varchar(255) NOT NULL,
      `descr` longtext NOT NULL,
      `rate` double NOT NULL,
      `projects_amount` int NOT NULL,
      `img` varchar(100) DEFAULT NULL,
      `user_id` int DEFAULT NULL
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
    
    --
    -- Дамп данных таблицы `clients_worker`
    --
    
    INSERT INTO `clients_worker` (`id`, `title`, `descr`, `rate`, `projects_amount`, `img`, `user_id`) VALUES
    (1, 'ООО \"Старт\"', 'Выполняем работы по SEO-продвижению и дизайну', 0, 0, 'images/marketing-strategy.png', NULL),
    (2, 'ООО \"Парус\"', 'Верстка и дизайн любой сложности', 0, 0, 'images/programming_1.png', NULL),
    (3, 'ООО \"Вега\"', 'Разработка и дизайн сайтов любой сложности, наполнение контентом', 0, 0, 'images/development_1.png', NULL),
    (4, 'ООО \"Стелла\"', 'Разработка и продвижение сайтов', 0, 0, 'images/research-and-development.png', NULL),
    (5, 'ООО \"Ламия\"', 'Дизайн фирменного стиля', 4, 1, 'images/business-plan.png', NULL),
    (6, '', '', 0, 0, '', 9),
    (7, 'df', '       df     ', 0, 0, 'images/color-palette.png', 10);
    
    -- --------------------------------------------------------
    
    --
    -- Структура таблицы `clients_worker_sub_cats`
    --
    
    CREATE TABLE `clients_worker_sub_cats` (
      `id` bigint NOT NULL,
      `worker_id` bigint NOT NULL,
      `subcategory_id` bigint NOT NULL
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
    
    --
    -- Дамп данных таблицы `clients_worker_sub_cats`
    --
    
    INSERT INTO `clients_worker_sub_cats` (`id`, `worker_id`, `subcategory_id`) VALUES
    (3, 1, 6),
    (4, 1, 7),
    (1, 1, 9),
    (2, 1, 12),
    (5, 2, 2),
    (6, 2, 4),
    (7, 2, 5),
    (8, 2, 6),
    (9, 2, 14),
    (10, 3, 1),
    (11, 3, 3),
    (12, 3, 8),
    (13, 3, 10),
    (14, 3, 11),
    (15, 3, 13),
    (16, 3, 14),
    (17, 3, 15),
    (19, 4, 1),
    (18, 4, 3),
    (20, 4, 11),
    (21, 4, 12),
    (22, 5, 4),
    (23, 5, 5),
    (24, 5, 6),
    (26, 7, 1),
    (25, 7, 15);
    
    -- --------------------------------------------------------
    
    --
    -- Структура таблицы `django_admin_log`
    --
    
    CREATE TABLE `django_admin_log` (
      `id` int NOT NULL,
      `action_time` datetime(6) NOT NULL,
      `object_id` longtext,
      `object_repr` varchar(200) NOT NULL,
      `action_flag` smallint UNSIGNED NOT NULL,
      `change_message` longtext NOT NULL,
      `content_type_id` int DEFAULT NULL,
      `user_id` int NOT NULL
    ) ;
    
    --
    -- Дамп данных таблицы `django_admin_log`
    --
    
    INSERT INTO `django_admin_log` (`id`, `action_time`, `object_id`, `object_repr`, `action_flag`, `change_message`, `content_type_id`, `user_id`) VALUES
    (1, '2024-04-08 13:33:30.407081', '4', 'SEO и трафик', 2, '[{\"changed\": {\"fields\": [\"\\u0418\\u0437\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u0435\"]}}]', 7, 1),
    (2, '2024-04-08 13:33:53.086572', '12', 'SEO-аудиты', 2, '[{\"changed\": {\"fields\": [\"\\u0418\\u0437\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u0435\"]}}]', 8, 1),
    (3, '2024-04-08 13:34:34.236827', '2', 'Дизайн', 2, '[{\"changed\": {\"fields\": [\"\\u0418\\u0437\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u0435\"]}}]', 7, 1),
    (4, '2024-04-08 13:35:22.109805', '1', 'Разработка и IT', 2, '[{\"changed\": {\"fields\": [\"\\u0418\\u0437\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u0435\"]}}]', 7, 1),
    (5, '2024-04-08 13:36:12.675860', '3', 'Соцсети и реклама', 2, '[{\"changed\": {\"fields\": [\"\\u0418\\u0437\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u0435\"]}}]', 7, 1),
    (6, '2024-04-08 13:37:00.950607', '5', 'Тексты и переводы', 2, '[{\"changed\": {\"fields\": [\"\\u0418\\u0437\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u0435\"]}}]', 7, 1),
    (7, '2024-04-08 13:37:32.919379', '9', 'Telegram', 2, '[{\"changed\": {\"fields\": [\"\\u0418\\u0437\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u0435\"]}}]', 8, 1),
    (8, '2024-04-08 13:38:25.278851', '2', 'Верстка по макету', 2, '[{\"changed\": {\"fields\": [\"\\u0418\\u0437\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u0435\"]}}]', 8, 1),
    (9, '2024-04-08 13:39:08.616789', '6', 'Визитки', 2, '[{\"changed\": {\"fields\": [\"\\u0418\\u0437\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u0435\"]}}]', 8, 1),
    (10, '2024-04-08 14:15:18.658436', '7', 'Вконтакте', 2, '[{\"changed\": {\"fields\": [\"\\u0418\\u0437\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u0435\"]}}]', 8, 1),
    (11, '2024-04-08 14:17:05.191908', '8', 'Дзен', 2, '[{\"changed\": {\"fields\": [\"\\u0418\\u0437\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u0435\"]}}]', 8, 1),
    (12, '2024-04-08 14:18:03.489167', '14', 'Карточки товаров', 2, '[{\"changed\": {\"fields\": [\"\\u0418\\u0437\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u0435\"]}}]', 8, 1),
    (13, '2024-04-08 14:18:43.256391', '4', 'Логотипы', 2, '[{\"changed\": {\"fields\": [\"\\u0418\\u0437\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u0435\"]}}]', 8, 1),
    (14, '2024-04-08 14:19:29.704908', '1', 'Новый сайт', 2, '[{\"changed\": {\"fields\": [\"\\u0418\\u0437\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u0435\"]}}]', 8, 1),
    (15, '2024-04-08 14:20:01.832219', '11', 'Продвижение сайта в ТОП', 2, '[{\"changed\": {\"fields\": [\"\\u0418\\u0437\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u0435\"]}}]', 8, 1),
    (16, '2024-04-08 14:21:09.335588', '10', 'Ссылки', 2, '[{\"changed\": {\"fields\": [\"\\u0418\\u0437\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u0435\"]}}]', 8, 1),
    (17, '2024-04-08 14:21:54.663848', '13', 'Статьи', 2, '[{\"changed\": {\"fields\": [\"\\u0418\\u0437\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u0435\"]}}]', 8, 1),
    (18, '2024-04-08 14:22:49.975453', '15', 'Сценарии', 2, '[{\"changed\": {\"fields\": [\"\\u0418\\u0437\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u0435\"]}}]', 8, 1),
    (19, '2024-04-08 14:23:39.167042', '3', 'Ускорение сайта', 2, '[{\"changed\": {\"fields\": [\"\\u0418\\u0437\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u0435\"]}}]', 8, 1),
    (20, '2024-04-08 14:24:49.224025', '5', 'Фирменный стиль', 2, '[{\"changed\": {\"fields\": [\"\\u0418\\u0437\\u043e\\u0431\\u0440\\u0430\\u0436\\u0435\\u043d\\u0438\\u0435\"]}}]', 8, 1),
    (21, '2024-04-09 03:36:57.488495', '1', 'ООО \"Старт\"', 1, '[{\"added\": {}}]', 9, 1),
    (22, '2024-04-09 03:38:56.238359', '2', 'ООО \"Парус\"', 1, '[{\"added\": {}}]', 9, 1),
    (23, '2024-04-09 03:40:58.653007', '3', 'ООО \"Вега\"', 1, '[{\"added\": {}}]', 9, 1),
    (24, '2024-04-09 03:42:10.039777', '4', 'ООО \"Стелла\"', 1, '[{\"added\": {}}]', 9, 1),
    (25, '2024-04-09 03:44:08.413431', '5', 'ООО \"Ламия\"', 1, '[{\"added\": {}}]', 9, 1),
    (26, '2024-04-09 04:48:05.088325', '1', 'Продвижение сайта в ТОП-10', 1, '[{\"added\": {}}]', 10, 1),
    (27, '2024-04-09 04:50:16.368040', '2', 'Дизайн визитки любой сложности', 1, '[{\"added\": {}}]', 10, 1),
    (28, '2024-04-09 04:54:17.620763', '2', 'Дизайн визитки любой сложности', 2, '[{\"changed\": {\"fields\": [\"\\u041e\\u043f\\u0438\\u0441\\u0430\\u043d\\u0438\\u0435\"]}}]', 10, 1),
    (29, '2024-04-09 04:56:14.411881', '2', 'Дизайн визитки любой сложности', 2, '[{\"changed\": {\"fields\": [\"\\u041e\\u043f\\u0438\\u0441\\u0430\\u043d\\u0438\\u0435\"]}}]', 10, 1),
    (30, '2024-04-09 08:11:28.766049', '1', 'clients', 1, '[{\"added\": {}}]', 3, 1),
    (31, '2024-04-09 08:11:35.974022', '2', 'workers', 1, '[{\"added\": {}}]', 3, 1),
    (32, '2024-04-09 12:35:39.344377', '4', '', 3, '', 11, 1),
    (33, '2024-04-13 04:35:44.031837', '1', '1', 2, '[{\"changed\": {\"fields\": [\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"]}}]', 12, 1),
    (34, '2024-04-13 04:35:49.600360', '2', '2', 2, '[{\"changed\": {\"fields\": [\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"]}}]', 12, 1),
    (35, '2024-04-13 04:35:53.679287', '3', '3', 2, '[{\"changed\": {\"fields\": [\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"]}}]', 12, 1),
    (36, '2024-04-13 04:35:57.215311', '4', '4', 2, '[{\"changed\": {\"fields\": [\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"]}}]', 12, 1),
    (37, '2024-04-13 05:24:20.003619', '1', '1', 2, '[{\"changed\": {\"fields\": [\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"]}}]', 12, 1),
    (38, '2024-04-13 05:49:59.928332', '4', '4', 3, '', 14, 1),
    (39, '2024-04-13 05:49:59.940242', '3', '3', 3, '', 14, 1),
    (40, '2024-04-13 05:49:59.947459', '2', '2', 3, '', 14, 1),
    (41, '2024-04-13 05:50:15.744461', '5', 'ООО \"Ламия\"', 2, '[]', 9, 1),
    (42, '2024-04-13 06:53:25.741322', '8', 'user7', 3, '', 4, 1),
    (43, '2024-04-13 06:53:32.164154', '5', 'worker1', 3, '', 4, 1);
    
    -- --------------------------------------------------------
    
    --
    -- Структура таблицы `django_content_type`
    --
    
    CREATE TABLE `django_content_type` (
      `id` int NOT NULL,
      `app_label` varchar(100) NOT NULL,
      `model` varchar(100) NOT NULL
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
    
    --
    -- Дамп данных таблицы `django_content_type`
    --
    
    INSERT INTO `django_content_type` (`id`, `app_label`, `model`) VALUES
    (1, 'admin', 'logentry'),
    (3, 'auth', 'group'),
    (2, 'auth', 'permission'),
    (4, 'auth', 'user'),
    (7, 'clients', 'category'),
    (11, 'clients', 'client'),
    (14, 'clients', 'feedback'),
    (10, 'clients', 'offer'),
    (13, 'clients', 'omessage'),
    (12, 'clients', 'order'),
    (8, 'clients', 'subcategory'),
    (9, 'clients', 'worker'),
    (5, 'contenttypes', 'contenttype'),
    (6, 'sessions', 'session');
    
    -- --------------------------------------------------------
    
    --
    -- Структура таблицы `django_migrations`
    --
    
    CREATE TABLE `django_migrations` (
      `id` bigint NOT NULL,
      `app` varchar(255) NOT NULL,
      `name` varchar(255) NOT NULL,
      `applied` datetime(6) NOT NULL
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
    
    --
    -- Дамп данных таблицы `django_migrations`
    --
    
    INSERT INTO `django_migrations` (`id`, `app`, `name`, `applied`) VALUES
    (1, 'contenttypes', '0001_initial', '2024-04-08 13:11:35.436757'),
    (2, 'auth', '0001_initial', '2024-04-08 13:11:36.784344'),
    (3, 'admin', '0001_initial', '2024-04-08 13:11:37.124745'),
    (4, 'admin', '0002_logentry_remove_auto_add', '2024-04-08 13:11:37.139012'),
    (5, 'admin', '0003_logentry_add_action_flag_choices', '2024-04-08 13:11:37.152250'),
    (6, 'contenttypes', '0002_remove_content_type_name', '2024-04-08 13:11:37.369396'),
    (7, 'auth', '0002_alter_permission_name_max_length', '2024-04-08 13:11:37.492899'),
    (8, 'auth', '0003_alter_user_email_max_length', '2024-04-08 13:11:37.613507'),
    (9, 'auth', '0004_alter_user_username_opts', '2024-04-08 13:11:37.626764'),
    (10, 'auth', '0005_alter_user_last_login_null', '2024-04-08 13:11:37.723491'),
    (11, 'auth', '0006_require_contenttypes_0002', '2024-04-08 13:11:37.732691'),
    (12, 'auth', '0007_alter_validators_add_error_messages', '2024-04-08 13:11:37.745682'),
    (13, 'auth', '0008_alter_user_username_max_length', '2024-04-08 13:11:37.866734'),
    (14, 'auth', '0009_alter_user_last_name_max_length', '2024-04-08 13:11:38.007568'),
    (15, 'auth', '0010_alter_group_name_max_length', '2024-04-08 13:11:38.148617'),
    (16, 'auth', '0011_update_proxy_permissions', '2024-04-08 13:11:38.161723'),
    (17, 'auth', '0012_alter_user_first_name_max_length', '2024-04-08 13:11:38.287715'),
    (18, 'sessions', '0001_initial', '2024-04-08 13:11:38.367724'),
    (19, 'clients', '0001_initial', '2024-04-08 13:17:31.770515'),
    (20, 'clients', '0002_category_img_subcategory_img', '2024-04-08 13:28:09.701446'),
    (21, 'clients', '0003_worker', '2024-04-09 03:15:58.429839'),
    (22, 'clients', '0004_alter_worker_options_offer', '2024-04-09 04:31:24.404973'),
    (23, 'clients', '0005_client_order', '2024-04-09 05:34:52.382066'),
    (24, 'clients', '0006_order_status', '2024-04-09 12:57:00.503553'),
    (25, 'clients', '0007_feedback_omessage', '2024-04-12 03:57:39.887603'),
    (26, 'clients', '0008_feedback_sdate', '2024-04-12 04:01:18.977224'),
    (27, 'clients', '0009_alter_worker_rate', '2024-04-13 05:47:15.711603'),
    (28, 'clients', '0010_worker_user', '2024-04-13 06:49:55.413660');
    
    -- --------------------------------------------------------
    
    --
    -- Структура таблицы `django_session`
    --
    
    CREATE TABLE `django_session` (
      `session_key` varchar(40) NOT NULL,
      `session_data` longtext NOT NULL,
      `expire_date` datetime(6) NOT NULL
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
    
    --
    -- Дамп данных таблицы `django_session`
    --
    
    INSERT INTO `django_session` (`session_key`, `session_data`, `expire_date`) VALUES
    ('02yh2xn7riduw0w4oqw3ye8hcqzxavi2', 'e30:1rvcnR:qtU_nT56znkxnLs2sTxmTgiQJ17Su07Iip0KrHI0b18', '2024-04-27 12:47:53.940144'),
    ('uu65sj0tkfeerc7bcw4umoqrau2k3uro', '.eJxVjEsOAiEQBe_C2pAG-enS_ZyBNN0oowaSYWZlvLuSzEK3r6reS0Tc1hK3npc4szgLBeLwOyakR66D8B3rrUlqdV3mJIcid9rl1Dg_L7v7d1Cwl1Fb546kLF9ZeQ5JkwFCspAUMEKgkL0xOifrIWFQ-hQIQbvwTVi7LN4fEEA4GQ:1rvd6F:l4y7QM_AZqzBjzamsUmlamXOw84mR9YN2tH1luHyrZU', '2024-04-27 13:07:19.890413');
    
    --
    -- Индексы сохранённых таблиц
    --
    
    --
    -- Индексы таблицы `auth_group`
    --
    ALTER TABLE `auth_group`
      ADD PRIMARY KEY (`id`),
      ADD UNIQUE KEY `name` (`name`);
    
    --
    -- Индексы таблицы `auth_group_permissions`
    --
    ALTER TABLE `auth_group_permissions`
      ADD PRIMARY KEY (`id`),
      ADD UNIQUE KEY `auth_group_permissions_group_id_permission_id_0cd325b0_uniq` (`group_id`,`permission_id`),
      ADD KEY `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` (`permission_id`);
    
    --
    -- Индексы таблицы `auth_permission`
    --
    ALTER TABLE `auth_permission`
      ADD PRIMARY KEY (`id`),
      ADD UNIQUE KEY `auth_permission_content_type_id_codename_01ab375a_uniq` (`content_type_id`,`codename`);
    
    --
    -- Индексы таблицы `auth_user`
    --
    ALTER TABLE `auth_user`
      ADD PRIMARY KEY (`id`),
      ADD UNIQUE KEY `username` (`username`);
    
    --
    -- Индексы таблицы `auth_user_groups`
    --
    ALTER TABLE `auth_user_groups`
      ADD PRIMARY KEY (`id`),
      ADD UNIQUE KEY `auth_user_groups_user_id_group_id_94350c0c_uniq` (`user_id`,`group_id`),
      ADD KEY `auth_user_groups_group_id_97559544_fk_auth_group_id` (`group_id`);
    
    --
    -- Индексы таблицы `auth_user_user_permissions`
    --
    ALTER TABLE `auth_user_user_permissions`
      ADD PRIMARY KEY (`id`),
      ADD UNIQUE KEY `auth_user_user_permissions_user_id_permission_id_14a6b632_uniq` (`user_id`,`permission_id`),
      ADD KEY `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` (`permission_id`);
    
    --
    -- Индексы таблицы `clients_category`
    --
    ALTER TABLE `clients_category`
      ADD PRIMARY KEY (`id`);
    
    --
    -- Индексы таблицы `clients_client`
    --
    ALTER TABLE `clients_client`
      ADD PRIMARY KEY (`id`),
      ADD UNIQUE KEY `user_id` (`user_id`);
    
    --
    -- Индексы таблицы `clients_feedback`
    --
    ALTER TABLE `clients_feedback`
      ADD PRIMARY KEY (`id`),
      ADD KEY `clients_feedback_order_id_89f1b725_fk_clients_order_id` (`order_id`);
    
    --
    -- Индексы таблицы `clients_offer`
    --
    ALTER TABLE `clients_offer`
      ADD PRIMARY KEY (`id`),
      ADD KEY `clients_offer_sub_category_id_f0e4078b_fk_clients_subcategory_id` (`sub_category_id`),
      ADD KEY `clients_offer_worker_id_b6908d3f_fk_clients_worker_id` (`worker_id`);
    
    --
    -- Индексы таблицы `clients_omessage`
    --
    ALTER TABLE `clients_omessage`
      ADD PRIMARY KEY (`id`),
      ADD KEY `clients_omessage_order_id_aa3920a0_fk_clients_order_id` (`order_id`),
      ADD KEY `clients_omessage_sender_id_b1a91f79_fk_auth_user_id` (`sender_id`);
    
    --
    -- Индексы таблицы `clients_order`
    --
    ALTER TABLE `clients_order`
      ADD PRIMARY KEY (`id`),
      ADD KEY `clients_order_client_id_54046f14_fk_clients_client_id` (`client_id`),
      ADD KEY `clients_order_offer_id_3e2a96dd_fk_clients_offer_id` (`offer_id`);
    
    --
    -- Индексы таблицы `clients_subcategory`
    --
    ALTER TABLE `clients_subcategory`
      ADD PRIMARY KEY (`id`),
      ADD KEY `clients_subcategory_category_id_1a7852db_fk_clients_category_id` (`category_id`);
    
    --
    -- Индексы таблицы `clients_worker`
    --
    ALTER TABLE `clients_worker`
      ADD PRIMARY KEY (`id`),
      ADD UNIQUE KEY `user_id` (`user_id`);
    
    --
    -- Индексы таблицы `clients_worker_sub_cats`
    --
    ALTER TABLE `clients_worker_sub_cats`
      ADD PRIMARY KEY (`id`),
      ADD UNIQUE KEY `clients_worker_sub_cats_worker_id_subcategory_id_227ca7a3_uniq` (`worker_id`,`subcategory_id`),
      ADD KEY `clients_worker_sub_c_subcategory_id_7f9251f0_fk_clients_s` (`subcategory_id`);
    
    --
    -- Индексы таблицы `django_admin_log`
    --
    ALTER TABLE `django_admin_log`
      ADD PRIMARY KEY (`id`),
      ADD KEY `django_admin_log_content_type_id_c4bce8eb_fk_django_co` (`content_type_id`),
      ADD KEY `django_admin_log_user_id_c564eba6_fk_auth_user_id` (`user_id`);
    
    --
    -- Индексы таблицы `django_content_type`
    --
    ALTER TABLE `django_content_type`
      ADD PRIMARY KEY (`id`),
      ADD UNIQUE KEY `django_content_type_app_label_model_76bd3d3b_uniq` (`app_label`,`model`);
    
    --
    -- Индексы таблицы `django_migrations`
    --
    ALTER TABLE `django_migrations`
      ADD PRIMARY KEY (`id`);
    
    --
    -- Индексы таблицы `django_session`
    --
    ALTER TABLE `django_session`
      ADD PRIMARY KEY (`session_key`),
      ADD KEY `django_session_expire_date_a5c62663` (`expire_date`);
    
    --
    -- AUTO_INCREMENT для сохранённых таблиц
    --
    
    --
    -- AUTO_INCREMENT для таблицы `auth_group`
    --
    ALTER TABLE `auth_group`
      MODIFY `id` int NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=3;
    
    --
    -- AUTO_INCREMENT для таблицы `auth_group_permissions`
    --
    ALTER TABLE `auth_group_permissions`
      MODIFY `id` bigint NOT NULL AUTO_INCREMENT;
    
    --
    -- AUTO_INCREMENT для таблицы `auth_permission`
    --
    ALTER TABLE `auth_permission`
      MODIFY `id` int NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=57;
    
    --
    -- AUTO_INCREMENT для таблицы `auth_user`
    --
    ALTER TABLE `auth_user`
      MODIFY `id` int NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=11;
    
    --
    -- AUTO_INCREMENT для таблицы `auth_user_groups`
    --
    ALTER TABLE `auth_user_groups`
      MODIFY `id` bigint NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=10;
    
    --
    -- AUTO_INCREMENT для таблицы `auth_user_user_permissions`
    --
    ALTER TABLE `auth_user_user_permissions`
      MODIFY `id` bigint NOT NULL AUTO_INCREMENT;
    
    --
    -- AUTO_INCREMENT для таблицы `clients_category`
    --
    ALTER TABLE `clients_category`
      MODIFY `id` bigint NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=6;
    
    --
    -- AUTO_INCREMENT для таблицы `clients_client`
    --
    ALTER TABLE `clients_client`
      MODIFY `id` bigint NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=7;
    
    --
    -- AUTO_INCREMENT для таблицы `clients_feedback`
    --
    ALTER TABLE `clients_feedback`
      MODIFY `id` bigint NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=5;
    
    --
    -- AUTO_INCREMENT для таблицы `clients_offer`
    --
    ALTER TABLE `clients_offer`
      MODIFY `id` bigint NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=7;
    
    --
    -- AUTO_INCREMENT для таблицы `clients_omessage`
    --
    ALTER TABLE `clients_omessage`
      MODIFY `id` bigint NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=6;
    
    --
    -- AUTO_INCREMENT для таблицы `clients_order`
    --
    ALTER TABLE `clients_order`
      MODIFY `id` bigint NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=6;
    
    --
    -- AUTO_INCREMENT для таблицы `clients_subcategory`
    --
    ALTER TABLE `clients_subcategory`
      MODIFY `id` bigint NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=16;
    
    --
    -- AUTO_INCREMENT для таблицы `clients_worker`
    --
    ALTER TABLE `clients_worker`
      MODIFY `id` bigint NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=8;
    
    --
    -- AUTO_INCREMENT для таблицы `clients_worker_sub_cats`
    --
    ALTER TABLE `clients_worker_sub_cats`
      MODIFY `id` bigint NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=27;
    
    --
    -- AUTO_INCREMENT для таблицы `django_admin_log`
    --
    ALTER TABLE `django_admin_log`
      MODIFY `id` int NOT NULL AUTO_INCREMENT;
    
    --
    -- AUTO_INCREMENT для таблицы `django_content_type`
    --
    ALTER TABLE `django_content_type`
      MODIFY `id` int NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=15;
    
    --
    -- AUTO_INCREMENT для таблицы `django_migrations`
    --
    ALTER TABLE `django_migrations`
      MODIFY `id` bigint NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=29;
    
    --
    -- Ограничения внешнего ключа сохраненных таблиц
    --
    
    --
    -- Ограничения внешнего ключа таблицы `auth_group_permissions`
    --
    ALTER TABLE `auth_group_permissions`
      ADD CONSTRAINT `auth_group_permissio_permission_id_84c5c92e_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`),
      ADD CONSTRAINT `auth_group_permissions_group_id_b120cbf9_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`);
    
    --
    -- Ограничения внешнего ключа таблицы `auth_permission`
    --
    ALTER TABLE `auth_permission`
      ADD CONSTRAINT `auth_permission_content_type_id_2f476e4b_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`);
    
    --
    -- Ограничения внешнего ключа таблицы `auth_user_groups`
    --
    ALTER TABLE `auth_user_groups`
      ADD CONSTRAINT `auth_user_groups_group_id_97559544_fk_auth_group_id` FOREIGN KEY (`group_id`) REFERENCES `auth_group` (`id`),
      ADD CONSTRAINT `auth_user_groups_user_id_6a12ed8b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`);
    
    --
    -- Ограничения внешнего ключа таблицы `auth_user_user_permissions`
    --
    ALTER TABLE `auth_user_user_permissions`
      ADD CONSTRAINT `auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm` FOREIGN KEY (`permission_id`) REFERENCES `auth_permission` (`id`),
      ADD CONSTRAINT `auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`);
    
    --
    -- Ограничения внешнего ключа таблицы `clients_client`
    --
    ALTER TABLE `clients_client`
      ADD CONSTRAINT `clients_client_user_id_57c8fc4a_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`);
    
    --
    -- Ограничения внешнего ключа таблицы `clients_feedback`
    --
    ALTER TABLE `clients_feedback`
      ADD CONSTRAINT `clients_feedback_order_id_89f1b725_fk_clients_order_id` FOREIGN KEY (`order_id`) REFERENCES `clients_order` (`id`);
    
    --
    -- Ограничения внешнего ключа таблицы `clients_offer`
    --
    ALTER TABLE `clients_offer`
      ADD CONSTRAINT `clients_offer_sub_category_id_f0e4078b_fk_clients_subcategory_id` FOREIGN KEY (`sub_category_id`) REFERENCES `clients_subcategory` (`id`),
      ADD CONSTRAINT `clients_offer_worker_id_b6908d3f_fk_clients_worker_id` FOREIGN KEY (`worker_id`) REFERENCES `clients_worker` (`id`);
    
    --
    -- Ограничения внешнего ключа таблицы `clients_omessage`
    --
    ALTER TABLE `clients_omessage`
      ADD CONSTRAINT `clients_omessage_order_id_aa3920a0_fk_clients_order_id` FOREIGN KEY (`order_id`) REFERENCES `clients_order` (`id`),
      ADD CONSTRAINT `clients_omessage_sender_id_b1a91f79_fk_auth_user_id` FOREIGN KEY (`sender_id`) REFERENCES `auth_user` (`id`);
    
    --
    -- Ограничения внешнего ключа таблицы `clients_order`
    --
    ALTER TABLE `clients_order`
      ADD CONSTRAINT `clients_order_client_id_54046f14_fk_clients_client_id` FOREIGN KEY (`client_id`) REFERENCES `clients_client` (`id`),
      ADD CONSTRAINT `clients_order_offer_id_3e2a96dd_fk_clients_offer_id` FOREIGN KEY (`offer_id`) REFERENCES `clients_offer` (`id`);
    
    --
    -- Ограничения внешнего ключа таблицы `clients_subcategory`
    --
    ALTER TABLE `clients_subcategory`
      ADD CONSTRAINT `clients_subcategory_category_id_1a7852db_fk_clients_category_id` FOREIGN KEY (`category_id`) REFERENCES `clients_category` (`id`);
    
    --
    -- Ограничения внешнего ключа таблицы `clients_worker`
    --
    ALTER TABLE `clients_worker`
      ADD CONSTRAINT `clients_worker_user_id_7986b5e0_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`);
    
    --
    -- Ограничения внешнего ключа таблицы `clients_worker_sub_cats`
    --
    ALTER TABLE `clients_worker_sub_cats`
      ADD CONSTRAINT `clients_worker_sub_c_subcategory_id_7f9251f0_fk_clients_s` FOREIGN KEY (`subcategory_id`) REFERENCES `clients_subcategory` (`id`),
      ADD CONSTRAINT `clients_worker_sub_cats_worker_id_62147dd1_fk_clients_worker_id` FOREIGN KEY (`worker_id`) REFERENCES `clients_worker` (`id`);
    
    --
    -- Ограничения внешнего ключа таблицы `django_admin_log`
    --
    ALTER TABLE `django_admin_log`
      ADD CONSTRAINT `django_admin_log_content_type_id_c4bce8eb_fk_django_co` FOREIGN KEY (`content_type_id`) REFERENCES `django_content_type` (`id`),
      ADD CONSTRAINT `django_admin_log_user_id_c564eba6_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user` (`id`);
    COMMIT;
    
    /*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
    /*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
    /*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
    
</body>
</html>